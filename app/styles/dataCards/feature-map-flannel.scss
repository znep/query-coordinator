@import "dataCards/common/fonts";
@import "dataCards/common/layout";

// $flannel-max-height - $flannel-content-max-height = $pagination-height
$flannel-max-height: 300px;
$flannel-content-max-height: 250px;
$pagination-height: 50px;

$flannel-width: 350px;
$pagination-vertical-padding: 7px;
$pagination-horizontal-padding: 10px;
$pagination-btn-width: 100px;
$pagination-top-border-width: 1px;
$flannel-hint-tip-size: 10px;
$sticky-border-height: 10px;

.feature-map-flannel {
  // Query status content
  .pending-content {
    height: $flannel-max-height / 2;
  }
  .error-content {
    height: $flannel-max-height / 2;
    .icon-warning {
      display: block;
      float: left;
      padding: 0 1rem 0 0;
      font-size: 1.5rem;
      line-height: 2rem;
    }
    .row {
      position: relative;
      padding-top: 3.75rem;
      padding-left: 4.5rem;
    }
    .error-message {
      width: 70%;
    }
  }
  // General layout
  .tool-panel {
    position: absolute;
    .tool-panel-main {
      margin: 0;
      display: block;
      width: 350px;
      max-height: $flannel-max-height;
      bottom: 10px;
      right: inherit;
      left: 50%;
      z-index: 1003;
    }
    .tool-panel-inner-container {
      padding: 0;
      overflow: auto;
      max-height: $flannel-content-max-height;
    }
    .tool-panel-hint {
      position: absolute;
      height: 10px;
      width: 10px;
      border: 0;
      background-color: transparent;
      top: auto;
      right: auto;
      &:after, &:before {
        border: solid transparent;
        content: " ";
        height: 0;
        width: 0;
        position: absolute;
      }
    }
    &.southwest .tool-panel-hint {
      left: 0;
      bottom: -9px;
      &:after {
        border-width: $flannel-hint-tip-size $flannel-hint-tip-size 0 0;
      }
      &:before {
        border-width: ($flannel-hint-tip-size + 1) ($flannel-hint-tip-size + 1) 0 0;
        top: 1px;
        left: -1px;
      }
    }
    &.southeast .tool-panel-hint {
      bottom: -9px;
      &:after {
        border-width: 0 $flannel-hint-tip-size $flannel-hint-tip-size 0;
      }
      &:before {
        border-width: 0 ($flannel-hint-tip-size + 1) ($flannel-hint-tip-size + 1) 0;
        top: 1px;
      }
    }
  }
  .icon-close {
    cursor: pointer;
    font-size: $icon-size;
    top: 5px;
    right: 5px;
    position: absolute;
    z-index: 3;
  }
  .sticky-border {
    position: absolute;
    height: $sticky-border-height;
    z-index: 2;
  }
  .sticky-border.bottom {
    top: $flannel-content-max-height - $sticky-border-height;
  }
  // Content from successful query
  .flannel-content {
    // Right padding needed for close icon, extra bottom padding
    // needed to avoid text cutoff.
    padding: 0.5rem 1.2rem 0.7rem 0.5rem;
    .flannel-title,
    .name,
    .value {
      max-width: 100%;
      // Only break word if it is too long
      // to fit on one entire line.
      // Otherwise do not break lines in the middle
      // of words.
      word-wrap: break-word;
    }
    .name,
    .value {
      display: inline-block;
    }
    .flannel-title {
      margin: 0px 0px 5px 0px;
      font-size: 1.2rem;
    }
    .name {
      font-weight: bold;
    }
  }
  // Pagination controls
  .paging-panel {
    padding: $pagination-vertical-padding $pagination-horizontal-padding;
    height: $pagination-height - 2 * $pagination-vertical-padding - $pagination-top-border-width;
    font-size: $small-font-size;
    .paging-info {
      margin: auto;
      width: $flannel-width - 2 * $pagination-btn-width - 2 * $pagination-horizontal-padding;
      .message {
        text-align: center;
        padding: 0 $pagination-horizontal-padding;
        div {
          overflow: hidden;
          text-overflow: ellipsis;
          white-space: nowrap;
        }
        div + div {
          margin-top: 0.2rem;
        }
      }
    }
    .pagination-btn {
      margin: 0;
      padding: 0;
      position: absolute;
      text-align: center;
      width: $pagination-btn-width;
      height: $pagination-height - 2 * $pagination-vertical-padding - $pagination-top-border-width;
      &.previous {
        left: $pagination-horizontal-padding;
        .caret:before {
          @include prefixer(transform, scaleX(0.75) rotate(180deg));
          content: "▶";
          display: inline-block;
          margin-right: 0.5rem;
        }
      }
      &.next {
        right: $pagination-horizontal-padding;
        .caret:after {
          @include prefixer(transform, scaleX(0.75));
          content: "▶";
          display: inline-block;
          margin-left: 0.5rem;
        }
      }
    }
  }
}
