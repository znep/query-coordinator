<% if logged_in? %>
  <section
    id="site-chrome-admin-header"
    role="navigation"
    class="<%= local_assigns.has_key?(:size) ? "site-chrome-#{size}" : '' %>">

    <div class="site-chrome-admin-header-section">
      <div class="site-chrome-admin-title">
        <a href="/"><%= admin_title %></a>
      </div>

      <div class="site-chrome-admin-separator"></div>

      <div class="site-chrome-admin-menus" role="menubar">
        <% if open_performance_enabled? %>
          <%= render 'site_chrome/admin/open_performance' %>
        <% else %>
          <div id="site-chrome-data-catalog" class="site-chrome-admin-menu">
            <a href="/browse"><%= t('admin.data_catalog.title') %></a>
          </div>
        <% end %>
      </div>
    </div>

    <div class="site-chrome-admin-header-section">
      <div id="site-chrome-header-notifications" tabIndex="-1">
        <%# This gets filled in by notifications JS %>
      </div>

      <div class="site-chrome-admin-separator"></div>

      <% if current_user_can_see_admin_link? && new_admin_ui_enabled? %>
        <div class="site-chrome-admin-settings"
          role="button"
          aria-haspopup="true"
          aria-label="<%= t('header.settings_menu.title') %>">
          <%= render 'site_chrome/admin/settings' %>
        </div>
        <div class="site-chrome-admin-separator"></div>
      <% end %>

      <div
        class="site-chrome-admin-user"
        tabIndex="0"
        role="button"
        aria-haspopup="true"
        aria-label="<%= t('header.profile') %>">
        <%= render 'site_chrome/admin/user' %>
      </div>
    </div>

    <% if get_feature_flag('enable_header_notifications') %>
      <script type="text/javascript">
        document.addEventListener(
          'DOMContentLoaded',
          function() {
            if (window.headerNotifications && document.getElementById('site-chrome-header-notifications')) {
              var options = {
                productUpdatesText: "<%= t('notifications.product_updates') %>",
                viewOlderText: "<%= t('notifications.view_older') %>",
                errorText: "<%= t('notifications.error_text_html') %>"
              };
              window.headerNotifications('#site-chrome-header-notifications', options);
            }
          },
          false
        );
      </script>
    <% end %>
  </section>
<% end %>
