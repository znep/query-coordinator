<% begin %>
  <% cache(cache_key_for_site_chrome(get_site_chrome, request)) do %>
    @import url("/socrata_site_chrome/stylesheets/open_sans/open_sans.css");
    @import url("/socrata_site_chrome/stylesheets/mono_social_icons_font/monosocialiconsfont.css");

    <% if params.key?(:debug_sass) %>
    ///////////////////////
    //   Unparsed SASS   //
    ///////////////////////

      <%== render('theme', :custom_themes => get_site_chrome.styles) %>
    <% else %>
      <%== Sass::Engine.new(render('theme', :custom_themes => get_site_chrome.styles),
        SocrataSiteChrome::ThemesHelper.sass_engine_options).render %>
    <% end %>
  <% end %>
<% rescue StandardError, SyntaxError => e
  error_msg = "Site Chrome error parsing styling configuration: #{e.inspect}"
  Rails.logger.debug(error_msg)
  ::Airbrake.notify(
    :error_class => 'InvalidSiteChromeStylingConfiguration',
    :error_message => error_msg
  )
  error_msg
end %>
