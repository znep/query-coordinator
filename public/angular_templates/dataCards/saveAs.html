<div class="tool-panel upwards">

  <button type="button" ng-class="{touched: panelActive, disabled: !hasChanges && !isEphemeral}" class="save-as-button tool-panel-toggle-btn action-btn customize-bar-action-btn r-to-l" ng-click="conditionallyShowPanel()">{{(isEphemeral ? 'saveButton.save' : 'saveAs.text') | I18n}}</button>
  <div id="save-as-panel" ng-class="{active: panelActive}" class="tool-panel-main">
    <div id="save-as-panel-inner-container" class="tool-panel-inner-container">
      <div class="tool-panel-hint"></div>
      <h2>{{::'saveAsPanel.title' | I18n}}</h2>

      <div class="tool-panel-input-group">
        <label for="save-as-name">{{::'saveAsPanel.newName' | I18n}}</label>
        <input id="save-as-name" class="form-control" type="text" placeholder="{{namePlaceholder}}" ng-focus="namePlaceholder = ''" ng-blur="namePlaceholder = defaultNamePlaceholder" />
      </div>

      <div class="tool-panel-input-group">
        <label for="save-as-description">{{::'saveAsPanel.description' | I18n}}</label>
        <textarea id="save-as-description" class="form-control no-resize" rows="5"></textarea>
      </div>

      <div class="tool-panel-input-group">
        <label for="save-as-visibility" ng-if="!datasetIsPrivate && !usingViewModeration">{{::'saveAsPanel.visibility' | I18n}}</label>
        <label for="save-as-visibility" ng-if="!datasetIsPrivate && usingViewModeration">{{::'saveAsPanel.visibilityWithViewModeration' | I18n}}</label>
        <soc-select id="save-as-visibility" ng-model="visibilityDropdownSelection" ng-disabled="visibilityDropdownDisabled" ng-if="!datasetIsPrivate">
          <soc-option value="approved">{{(usingViewModeration ? 'manageLensDialog.visibility.viewModerationApproved' : 'manageLensDialog.visibility.shown') | I18n}}</soc-option>
          <soc-option value="rejected">{{(usingViewModeration ? 'manageLensDialog.visibility.viewModerationRejected' : 'manageLensDialog.visibility.hidden') | I18n}}</soc-option>
          <soc-option value="pending" ng-if="usingViewModeration && initialPageVisibility == 'pending'">{{::'manageLensDialog.visibility.viewModerationPending' | I18n}}</soc-option>
        </soc-select>
        <p class="visibility-alert" ng-if="visibilityDropdownDisabled && !datasetIsPrivate">
          {{::'saveAsPanel.visibilityDisabled' | I18n}}
        </p>
        <p class="visibility-alert" ng-if="datasetIsPrivate">
          {{::'manageLensDialog.visibility.datasetIsPrivate' | I18n}}
        </p>
      </div>

      <div class="tool-panel-input-group official-view" ng-show="currentUserHasRights">
        <input id="save-as-official-view" type="checkbox" ng-model="isOfficial"/>
        <label for="save-as-official-view">{{::'saveVisualizationAsDialog.officialViewLabel' | I18n}}</label>
        <p class="save-as-official-view-description">{{::'saveVisualizationAsDialog.officialViewExplanation' | I18n}}</p>
      </div>

      <div class="tool-panel-input-group">
        <save-button
          ng-click="save()"
          enabled="hasChanges || isEphemeral"
          class="l-to-r"
          button-class="customize-bar-action-btn"
          save-status="saveStatus">
        </save-button>
        <button
          title="{{::'common.cancel' | I18n}}"
          data-action="cancel"
          class="tool-panel-btn action-btn customize-bar-action-btn l-to-r"
          ng-click="cancel()">
          {{::'common.cancel' | I18n}}
        </button>
      </div>
    </div>
  </div>

</div>
