@import dataCards/common/fonts
@import dataCards/common/colors

$tick-height: 1rem
$tick-font-size: 0.75rem

$chart-padding-top: 10px
$chart-padding-bottom: 132px
$chart-tooltip-offset: 999px

$fill-opacity: 0.5

.flyout.filtered
  .flyout-row:last-child
    color: $filtered-line-color-hover

// Override cursor for dragging state.
.dragged g.segment
  cursor: grabbing
  cursor: -webkit-grabbing !important

div.timeline-chart

  div.chart-scroll
    position: absolute

  div.timeline-chart-wrapper

    svg.graph
      overflow: visible

      g.xticks
        rect.tick
          fill: white

        &.tick-dark rect.tick
          fill: $chart-tick-color

      g.segment
        cursor: pointer

        path.line
          fill: none
          stroke-linecap: round
          stroke-linejoin: round
          stroke-width: 2px

          &.unfiltered
            stroke: $unfiltered-line-color
          &.filtered
            stroke: $filtered-line-color

        path.fill

          &.unfiltered
            fill: rgba($unfiltered-line-color, $fill-opacity)
          &.filtered
            fill: rgba($filtered-line-color, $fill-opacity)

        rect.spacer
          fill: transparent

        &:hover, &.hover
          path.line
            &.unfiltered
              stroke: $unfiltered-line-color-hover
            &.filtered
              stroke: $filtered-line-color-hover
          path.fill
            &.unfiltered
              fill: rgba($unfiltered-line-color-hover, $fill-opacity)
            &.filtered
              fill: rgba($filtered-line-color-hover, $fill-opacity)

        &.highlighted
          path.filtered
            &.line
              stroke: $selected-line-color
            &.fill
              fill: rgba($selected-line-color, $fill-opacity)
          &:hover, &.hover
            path.filtered
              &.line
                stroke: $selected-line-color-hover
              &.fill
                fill: rgba($selected-line-color-hover, $fill-opacity)

      g.draghandle
        cursor: col-resize
        line
          stroke: $draghandle-line-color
          stroke-dasharray: 7, 3
        path
          stroke: $draghandle-border
          fill: $draghandle-fill
          stroke-linejoin: round
        rect
          fill: transparent

  $dim-opacity: 0.2

  div.labels
    position: absolute
    right: 0
    left: 0
    height: $base-font-size

    &.dim>div.label
      @include transitions(opacity .2s linear)
      opacity: $dim-opacity
      z-index: 1

    >div.label
      cursor: pointer
      position: absolute
      bottom: 0
      color: $timeline-label-color
      font-size: $medium-font-size
      line-height: $base-font-size
      white-space: nowrap

      .text, .timeline-clear-selection
        display: inline-block

      &.edge-label
        display: none

      &.hidden
        opacity: 0
        z-index: 1

      &.active, &.highlighted
        color: $timeline-label-color-active
        background-color: rgba(255, 255, 255, 0.8)
        opacity: 1
        z-index: 2
        display: block

        .timeline-clear-selection
          font-family: 'SSAir'
          font-size: 1.3em
          color: black
          margin-left: 3px

  &.selecting
    div.labels
      >div.label
        // During selection, all labels (except the highlighted one) should be translucent
        &, &.active
          opacity: $dim-opacity
          color: $timeline-label-color
          z-index: 1

        &.hidden
          opacity: 0
          z-index: 1

        &.highlighted
          opacity: 1
          z-index: 2

    div.chart-scroll
      g.draghandle, .label.highlighted
        pointer-events: none

  div.ticks
    position: absolute

    div
      height: $tick-height
      border-bottom: 1px solid $chart-tick-color
      position: absolute
      width: 100%
      color: $chart-tick-color
      text-align: right
      margin-top: -$tick-height
      font-size: $tick-font-size

