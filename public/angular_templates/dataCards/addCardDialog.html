<h2>Add a card</h2>
<div class="add-card-select-column">
  <soc-select ng-model="addCardSelectedColumnFieldName">
    <soc-option
      value="null"
      disabled="disabled"
      ng-selected="addCardSelectedColumnFieldName === null">{{'addCardDialog.chooseColumn' | I18n}}</soc-option>

    <soc-option value="null" disabled="disabled" ng-if="datasetColumns.available.length > 0"></soc-option>

    <soc-option
      value="{{fieldName}}"
      title="{{'addCardDialog.addThisCard' | I18n}}"
      ng-repeat="fieldName in datasetColumns.available">{{columnHumanNameFn(fieldName)}}</soc-option>

    <soc-option value="null" disabled="disabled" ng-if="datasetColumns.alreadyOnPage.length > 0"></soc-option>

    <soc-option
      value="null"
      disabled="disabled"
      ng-if="datasetColumns.alreadyOnPage.length > 0"><b>{{'addCardDialog.cardOnPage' | I18n}}</b></soc-option>

    <soc-option
      value="{{fieldName}}"
      title="{{'addCardDialog.cardOnPageLong' | I18n}}"
      disabled="disabled"
      ng-repeat="fieldName in datasetColumns.alreadyOnPage">-{{columnHumanNameFn(fieldName)}}</soc-option>

    <soc-option value="null" disabled="disabled" ng-if="datasetColumns.visualizationUnsupported.length > 0"></soc-option>

    <soc-option
      value="null"
      disabled="disabled"
      ng-if="datasetColumns.visualizationUnsupported.length > 0">{{'addCardDialog.notSupported' | I18n}}</soc-option>

    <soc-option
      value="{{fieldName}}"
      title="{{'addCardDialog.notSupportedLong' | I18n}}"
      disabled="disabled"
      ng-repeat="fieldName in datasetColumns.visualizationUnsupported">-{{columnHumanNameFn(fieldName)}}</soc-option>

  </soc-select>
</div>
<div class="add-card-options">
  <ul class="cf" ng-show="availableCardTypes.length > 1">
    <li ng-show="availableCardTypes.indexOf('timeline') > -1">
      <button
        class="add-card-type-option icon-line-chart"
        ng-class="{ selected: addCardModel.getCurrentValue('cardType') === 'timeline' }"
        ng-click="setCardType('timeline')"
        data-visualization-name="{{'common.cards.timelineChart' | I18n}}"></button>
      <span>{{'common.cards.timelineChart' | I18n}}</span>
    </li>
    <li ng-show="availableCardTypes.indexOf('search') > -1">
      <button
      class="add-card-type-option icon-search"
      ng-class="{ selected: addCardModel.getCurrentValue('cardType') === 'search' }"
      ng-click="setCardType('search')"
      data-visualization-name="{{'common.cards.searchCard' | I18n}}"></button>
      <span>{{'common.cards.searchCard' | I18n}}</span>
    </li>
    <li ng-show="availableCardTypes.indexOf('feature') > -1">
      <button
        class="add-card-type-option icon-map"
        ng-class="{ selected: addCardModel.getCurrentValue('cardType') === 'feature' }"
        ng-click="setCardType('feature')"
        data-visualization-name="{{'common.cards.featureMap' | I18n}}"></button>
      <span>{{'common.cards.featureMap' | I18n}}</span>
    </li>
    <li ng-show="availableCardTypes.indexOf('column') > -1">
      <button
        class="add-card-type-option icon-bar-chart"
        ng-class="{ selected: addCardModel.getCurrentValue('cardType') === 'column', warn: showCardinalityWarning }"
        ng-click="setCardType('column')"
        data-visualization-name="{{'common.cards.columnChart' | I18n}}">
          <span class="warning-icon icon-warning"></span>
        </button>
      <span>{{'common.cards.columnChart' | I18n}}</span>
    </li>
    <li ng-show="availableCardTypes.indexOf('histogram') > -1">
      <button
        class="add-card-type-option icon-distribution"
        ng-class="{ selected: addCardModel.getCurrentValue('cardType') === 'histogram' }"
        ng-click="setCardType('histogram')"
        data-visualization-name="{{'common.cards.distributionChart' | I18n}}">
        </button>
        <span>{{'common.cards.distributionChart' | I18n}}</span>
    </li>
    <li ng-show="availableCardTypes.indexOf('choropleth') > -1">
      <button
        class="add-card-type-option icon-region"
        ng-class="{ selected: addCardModel.getCurrentValue('cardType') === 'choropleth' }"
        ng-click="setCardType('choropleth')"
        data-visualization-name="{{'common.cards.choropleth' | I18n}}"></button>
      <span>{{'common.cards.choropleth' | I18n}}</span>
    </li>
  </ul>
</div>
<div class="add-card-preview">
  <span ng-if="addCardModel === null">{{'addCardDialog.prompt' | I18n}}</span>
  <div class="card-spot" ng-if="addCardModel !== null">
    <card model="addCardModel"
      interactive="false"
      class="card preview">
    </card>
    <div class="add-card-controls">
      <div class="card-control add-card-settings icon-settings"
        title="{{'addCardDialog.customizePrompt' | I18n}}"
        ng-if="isCustomizable"
        ng-click="onCustomizeCard(addCardModel)">
        {{'addCardDialog.settings' | I18n}}
      </div>
    </div>
  </div>
</div>
<div class="add-card-buttons">
  <button type="button"
    class="action-btn dark r-to-l"
    ng-click="dialogState.show = false">{{'common.cancel' | I18n}}</button>
  <button type="button"
    class="action-btn dark r-to-l"
    ng-class="{disabled: addCardModel === null}"
    ng-click="addCard()">{{'addCardDialog.addCard' | I18n}}</button>
</div>
