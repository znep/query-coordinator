@import dataCards/ellipsis
@import dataCards/common/layout
@import dataCards/common/colors
@import dataCards/common/fonts
@import dataCards/selection-label
@import dataCards/clearable-input
@import dataCards/animations

body
  margin: 0
  padding: 0 0 $customize-bar-height + 10px
  color: white
  font-family: 'myriad-pro', 'Helvetica Neue', Helvetica, Arial, sans-serif
  font-size: 14px
  font-weight: 200
  overflow-x: hidden
  overflow-y: scroll

  &.prevent-user-select
    -moz-user-select: none
    -khtml-user-select: none
    -webkit-user-select: none
    -o-user-select: none
    user-select: none

// Begin workaround for OSX + chrome + Magic Mouse hiding scrollbars by default.
// Not only does this cause our scrollable content to be rather undiscoverable,
// it messes with our jquery resize plugin.
::-webkit-scrollbar
  width: 0.7rem

::-webkit-scrollbar-track
  -webkit-border-radius: 0.35rem
  border-radius: 0
  width: 0.35rem
  background: rgba(0,0,0,0.1)

::-webkit-scrollbar-thumb
  -webkit-border-radius: 0.35rem
  border-radius: 0.35rem
  width: 0.35rem
  background: rgba(0,0,0,0.2)

::-webkit-scrollbar-thumb:hover
  background: rgba(0,0,0,0.4)

::-webkit-scrollbar-thumb:window-inactive
  background: rgba(0,0,0,0.05)

::-webkit-scrollbar-corner
  background: rgba(0,0,0,0.1)

h1
  margin: 0
  font-size: 1.5em

a
  color: #696969
  text-decoration: none

.invisible
  visibility: hidden

.transparent
  opacity: 0

.hint
  color: #aaa

.italicize
  font-style: italic

.lowercase
  text-transform: lowercase

// Vertical center the logo if it's shorter than 50px
.page-header-logo
  padding: $header-logo-padding
  display: table-cell
  vertical-align: middle
  height: $header-logo-height

  >img
    position: relative
    max-height: $header-logo-height

.page-header-links
  text-align: right
  line-height: (2 * $header-logo-padding-y) + $header-logo-height
  padding-right: 1rem

.page-header-link
  margin-left: 2rem


// Why is this not in cards.sass?
$quickFilterBarHeight: 40px
$cardBorder: 2px
$pageNameLineHeight: 1.5rem
$pageNameMaxLineCount: 2
.cards-view
  .pageName
    position: absolute
    top: 0
    @include multiline-with-ellipsis($pageNameMaxLineCount, $pageNameLineHeight, $view-cards-bg-color)
  // The multiline-with-ellipsis mixin requires a fixed height on the content regardless
  // of whether or not the content is wrapping. So, we take the ellipsified content out
  // of layout and instead use this pageNameMeasuringStick to reserve the right amount
  // of space.
  .pageNameMeasuringStick
    visibility: hidden
    line-height: $pageNameLineHeight
    max-height: $pageNameLineHeight * $pageNameMaxLineCount

  .hideableMetadata
    margin: 15px

$card-padding: 0
// Card should not assume padding or margin.
// Containers within card should have control over padding and margin of card content.
$card-title-expanded-bg-color: #aaa
$card-title-padding: 5px
$card-title-margin-right: 35px
$card-title-line-height: 1.2em
$card-description-max-line-count: 2
$card-description-line-height: 1.3em
$card-description-transition-duration: 0.5s
.card

  .description
    position: relative
    line-height: $card-description-line-height
    padding-right: 30px
    color: $lt-grey-font-color-rgba

    .description-expand-button
      display: none
      position: absolute
      visibility: collapse
      right: 0
      bottom: 0
      width: 15px
      height: 25px
      cursor: pointer

    .description-expanded-wrapper
      position: absolute
      overflow: hidden
      opacity: 0.9

      .description-expanded-content
        color: #000
        background: rgba($card-bg-color, 0.9)
        overflow-y: auto
        overflow-x: hidden
        padding-bottom: 0

      top: 0
      display: block
      padding-right: 20px
      z-index: 1001
      /* z-index must override leaflet's z-index (1001) on choropleths */

      .description-expand-button
        display: block

    .description-truncated-content
      visibility: hidden

    &.clamped
      .description-expand-button
        visibility: visible

    &.collapsed
      max-height: $card-description-line-height * 2
      .description-expanded-wrapper
        .description-expanded-content
          visibility: collapse
        /* N.B this !important is here so that animations work - the initial max-height
           is set via jQuery, but this max-height here must override it if we're collapsed. */
        max-height: $card-description-line-height * 2 !important
      .description-truncated-content
        visibility: visible

    &.with-animation
      .description-expanded-wrapper
        .description-expanded-content
          @include prefixer(transition-property, "visibility")
          @include prefixer(transition-duration, "0s")
          @include prefixer(transition-timing-function, "step-end")
          @include prefixer(transition-delay, "0")
        @include prefixer(transition-property, "max-height, z-index")
        @include prefixer(transition-duration, "#{$card-description-transition-duration}, 0s")
        @include prefixer(transition-timing-function, "ease, step-end")
        @include prefixer(transition-delay, "0, 0")
        z-index: 3
      .description-truncated-content
        @include prefixer(transition-property, "visibility")
        @include prefixer(transition-duration, "0")
        @include prefixer(transition-delay, "0")

      &.collapsed
        .description-expanded-wrapper
          .description-expanded-content
            @include prefixer(transition-duration, "0")
            @include prefixer(transition-delay, "#{$card-description-transition-duration}")
          @include prefixer(transition-duration, "#{$card-description-transition-duration}, #{$card-description-transition-duration}")
          @include prefixer(transition-delay, "0, #{$card-description-transition-duration}")
        .description-truncated-content
          @include prefixer(transition-delay, "#{$card-description-transition-duration}")

  .title-one-line
    line-height: $card-title-line-height
    display: inline-block
    font-weight: bold
    max-width: 100%
    &.dynamic-title
      color: $card-dynamic-title-color
      font-size: $small-font-size
      line-height: $small-font-size
      padding-bottom: 1px
    .wrap
      overflow: hidden
      text-overflow: ellipsis
      white-space: nowrap
      margin-right: $card-title-margin-right + $card-title-padding

#ruler
  position: absolute
  left: -10000px
  visibility: hidden

//
// For modern browsers
// 1. The space content is one way to avoid an Opera bug when the
//    contenteditable attribute is included anywhere else in the document.
//    Otherwise it causes space to appear at the top and bottom of elements
//    that are clearfixed.
// 2. The use of `table` rather than `block` is only necessary if using
//    `:before` to contain the top-margins of child elements.
//
// Source: http://nicolasgallagher.com/micro-clearfix-hack/
//
.cf:before,
.cf:after
  content: " "
  display: table

.cf:after
  clear: both

//
// For IE 6/7 only
// Include this rule to trigger hasLayout and contain floats.
//
.cf
  *zoom: 1
