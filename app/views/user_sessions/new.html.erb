<% content_for :head do %>
  <%= rendered_stylesheet_tag 'screen-login' %>
  <title><%= CurrentDomain.strings.site_title %></title>
<% end %>

<% content_for :skip_links do %>
  <%- unless params[:no_js].present? -%>
    <%= link_to t('core.no_js'), '?no_js=true' %>
  <%- end -%>
<% end %>

<%- openid_login = CurrentDomain.module_enabled?(:openid_login) -%>

<div class="modalContentBox loginModal siteContent <%= openid_login ? 'wide' : 'narrow' %>">
  <div class="contentHeader">
    <%= render :partial => 'accounts/login_header' %>
  </div>
  <div class="contentBoxInner loginScreen clearfix">
    <div class="loginSignupForm firstColumn column">
      <%= render :partial => 'login_form' %>
      <%- unless params[:no_js].present? -%>
        <%= render :partial => 'accounts/signup_form' %>
      <%- end -%>
    </div>

    <%- if openid_login -%>
      <div class="rpxLoginPane column">
        <%= render :partial => 'rpx/openid_login' %>
      </div>
    <%- end -%>
  </div>
</div>

<% content_for :js_footer do %>
  <script type="text/javascript">
    blist.configuration.show_domain_decommissioning_message = <%= FeatureFlags.derive(nil, request).domain_decommissioning %>;
  </script>
  <%- unless params[:no_js].present? -%>
    <%= include_javascripts 'screen-login-signup' %>
    <%= javascript_include_tag 'https://rpxnow.com/openid/v2/widget' %>
    <script>
      RPXNOW.overlay = true;
      RPXNOW.language_preference = 'en'
    </script>
  <%- end -%>
<% end %>
