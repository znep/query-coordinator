<% content_for :head do %>
  <%= rendered_stylesheet_tag 'administration-screen' %>
  <title>Datasets | <%= CurrentDomain.strings.site_title %></title>
<% end %>

<% content_for :skip_links do %>
  <a href="?no_js=true">Disable Javascript on this page</a>
<% end %>

<%= render :partial => 'left_nav' %>

<div id="datasetContent" class="contentBox withLeftNavigation">
  <div class="adminHeader datasets">
    <span class="icon"></span>
    <h1>Datasets</h1>
  </div>

  <%= display_standard_flashes %>

  <%- if CurrentDomain.user_can?(current_user, 'edit_others_datasets') -%>
  <div class="datasetsList content">
    <h2>Datasets</h2>
    <%= render_browse(@processed_browse) %>
  </div>
  <%- end -%>

  <%- if CurrentDomain.user_can?(current_user, 'edit_site_theme') -%>
  <%- sidebar_position = CurrentDomain.property(:position, :sidebar) || 'right' -%>
  <div class="layoutConfig">
    <h2>Layout Configuration</h2>
    <%= form_tag({:action => 'modify_sidebar_config'}, {:method => 'post',
      :class => 'commonForm'}) %>
      <div class="line">
        <span class="mainLabel">Sidebar Position</span>
        <div class="valueBox">
          <input type="radio" id="sidebarPosition_right"
            name="sidebar[position]" value="right"
            <%= sidebar_position == 'right' ? 'checked="checked"' : '' %> />
          <label for="sidebarPosition_right">Right</label>
        </div>
        <div class="valueBox">
          <input type="radio" id="sidebarPosition_left"
            name="sidebar[position]" value="left"
            <%= sidebar_position == 'left' ? 'checked="checked"' : '' %> />
          <label for="sidebarPosition_left">Left</label>
        </div>
        <span class="saving statusText">Saving</span>
        <span class="saved statusText">Saved</span>
      </div>
      <input type="submit" value="Save" />
    </form>
  </div>
  <%- end -%>
</div>

<%- content_for :js_footer do -%>
  <%- unless params[:no_js] == 'true' -%>
    <%= include_javascripts 'admin-datasets' %>
  <%- end -%>
<%- end -%>
