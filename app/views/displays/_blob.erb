<div class="externalLinkDisplay clearfix <%= @view.display.display_type %>">
  <p class="info">
  <%- if @view.display.type == 'href' && @view.has_importable_type? -%>
  <%= t 'screens.ds.blob.download' %>
  <%- elsif @view.display.type == 'href' || @view.display.display_type == 'link' -%>
  <%= t 'screens.ds.blob.data_extraction' %>
  <%- else -%>
  <%= t 'screens.ds.blob.limited_download' %>
  <%- end -%>
  </p>
  <%- multiAccessPoints = @view.allAccessPoints.length > 1 -%>
  <div class="downloadBox <%= 'multiAccessPoints' if multiAccessPoints %>">
    <%- if @view.display.type == 'href' || @view.display.display_type == 'link' -%>
      <h5><%= t 'screens.ds.blob.external_link' %></h5>
    <%- else -%>
      <h5><%= t 'screens.ds.blob.download' %></h5>
    <%- end -%>
    <ul>
      <%- @view.allAccessPoints.each do |accessPoint| -%>
        <%- if accessPoint['title'].present? -%>
          <li>
            <span class="accessPointTitle">
              <%= accessPoint['title'] %>
            </span>
            <div class="accessPointButtons">
              <%- accessPoint['urls'].each do |format, url| -%>
                <a class="button" href="<%= url %>" target="_blank">
                  <%- size = accessPoint['size'].is_a?(Numeric) ?
                    number_to_human_size(accessPoint['size'], :locale => :en) : accessPoint['size'] -%>
                  <%= format.upcase %> <%= size %>
                </a>
              <%- end -%>
            </div>
          </li>
        <%- else -%>
          <%- accessPoint['urls'].each do |format, url| -%>
            <li>
              <span class="accessPointTitle">
                <%= url %>
              </span>
              <div class="accessPointButtons">
                <a class="button" href="<%= url %>" target="_blank">
                  <%- size = accessPoint['size'].is_a?(Numeric) ?
                    number_to_human_size(accessPoint['size'], :locale => :en) : accessPoint['size'] -%>
                  <%= format.upcase %> <%= size %>
                </a>
              </div>
            </li>
          <%- end -%>
        <%- end -%>
      <%- end -%>
    </ul>
  </div>
</div>

<%- if @view.display.display_type == 'image' -%>
<div class="displayArea image fullHeight">
<img src="<%= @view.blobs[0]['href'] %>" alt="<%= @view.name %>" />
</div>

<%- elsif @view.display.display_type == 'google_viewer' -%>
<%- blob_location = URI.escape(request.protocol + request.host_with_port +
  @view.blobs[0]['href']) -%>
<div class="displayArea fullHeight">
<noscript>
    <p><%= t('screens.ds.blob.js_required') %></p>
    <p><%= t('screens.ds.blob.js_required_download.prompt_html', click_here: link_to(t('screens.ds.blob.js_required_download.click_here'), blob_location, :target => '_blank')).html_safe %></p>
</noscript>
</div>

<%- else -%>
<div id="aboutSection">
  <%= render :partial => 'datasets/about_dataset', :locals => {:full_page => true} %>
</div>
<%- end -%>
