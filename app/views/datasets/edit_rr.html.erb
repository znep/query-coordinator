<% content_for :head do %>
  <%= rendered_stylesheet_tag 'grid' %>
  <%= rendered_stylesheet_tag 'dataset-edit-rr' %>
  <%= include_stylesheets 'grid-sidebar' %>
  <title>Editing Rich Display for <%= @view.name %> | <%= CurrentDomain.strings.site_title %></title>
<% end %>

<div class='contentBox' id='datasetEditRR'>
  <div class='header clearfix'>
    <a href="<%= @view.href %>" class="returnLink">Return to Dataset</a>

    <h1>Editing Rich Display for <%= @view.name %></h1>

    <div class="unsavedLine">
      <a href="#save" class="save button">Save</a>
      <a href="#revert" class="revert button">Revert Changes</a>
      <span class="loadingIcon hide">Working...</span>
    </div>

    <ul id='renderTypeOptions' class="pillButtons">
      <li><a href='<%= @view.href %>/edit_rr?defaultRender=richList'
        class='fatrow noRedirPrompt' title='Edit rich list layout'>
        <span class='icon'></span>
      </a></li>
      <li><a href='<%= @view.href %>/edit_rr?defaultRender=page'
        class='page noRedirPrompt' title='Edit single row layout'>
        <span class='icon'></span>
      </a></li>
    </ul>
  </div>

  <div class='mainContainer'>
    <div id='layoutContainer'
      class='richRendererContainer navRenderType fatRowRenderType'>
      <div class='renderArea'>
      </div>

      <ul class='navigation'>
        <li><a href='#start' title='View first row' class='start button'>
          <span class='icon'></span>
        </a></li>
        <li><a href='#previous' title='View previous row' class='previous button'>
          <span class='icon'></span>
        </a></li>
        <li class='info'>
        Viewing row <span class='curPage'></span> of <span
          class='totalPages'></span>
        </li>
        <li><a href='#next' title='View next row' class='next button'>
          <span class='icon'></span>
        </a></li>
        <li><a href='#end' title='View last row' class='end button'>
          <span class='icon'></span>
        </a></li>
      </ul>
    </div>

    <div id='gridSidebar'></div>
  </div>
</div>

<% content_for :templates do %>
<%= render(:partial => 'shared/grid_sidebar_templates') %>
<div class='fieldPalette'>
  <div class='sectionContent'>
    <ul class='columnFields'>
      <li class='columnItem'>
        <div class='columnLabel richLabel fieldItem'></div>
        <div class='columnData richItem fieldItem noRender'></div>
      </li>
    </ul>
    <div class='fieldItem richLabel staticLabel defaultData'>(Static text)</div>
  </div>
</div>
<% end %>

<% content_for :modals do %>
<%= render :partial => 'save_view_dialog' %>
<% end %>

<% content_for :js_footer do %>
  <script type='text/javascript'>
    blist.dataset = new Dataset(<%= safe_json(@view) %>);
  </script>
  <%= include_javascripts 'dataset-edit-rr' %>
<% end %>
