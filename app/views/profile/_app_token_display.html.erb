<div class="appTokenDisplay<%= ' edit' if edit %>">
  <%- if token.has_thumbnail? -%>
    <div class="thumbnail thumbnailArea">
      <img src="<%= token.thumbnail_url %>" alt="thumbnail" />
    </div>
  <%- else -%>
    <div class="noThumbnail thumbnailArea">
      <%- if edit -%>
        <img alt="thumbnail" />
      <%- end -%>
      <span class="noThumbnailText">
        <em>No Thumbnail</em>
      </span>
    </div>
  <%- end -%>
  <div class="appTokenContent">
    <%- ['name', 'description', 'organization', 'website'].each do |field| -%>
      <%- if token.data[field].present? -%>
        <p>
          <span class="fieldName"><%= field.capitalize %></span>
          <span class="fieldValue">
            <%= raw(auto_link(h(token.data[field]), :html => { :rel=> 'external' })) %>
          </span>
        </p>
      <%- end -%>
    <%- end -%>
    <%- if edit -%>
      <p class="appTokenLine">
        <span class="fieldName">App Token</span>
        <span class="appTokenTextContainer fieldValue">
          <span class="appTokenText"><%= token.app_token %></span>
        </span>
      </p>
      <p class="appTokenLine">
        <span class="fieldName">Secret Token</span>
        <span class="appTokenTextContainer fieldValue">
          <span class="appTokenText"></span>
          <a class="showSecretLink" href="#showSecretToken"
            data-userId="<%= current_user.id %>"
            data-appTokenId="<%= token.id %>">Show Secret Token</a>
        </span>
      </p>
    <%- end -%>
    <%- if edit -%>
      <%= form_tag({:action => :delete_app_token, :token_id => token.id}) %>
        <p class="actionsLine">
          <%= link_to 'Edit', {:action => 'edit_app_token', :id => current_user.id,
                               :token_id => token.id}, :class => 'button' %>
          <%= submit_tag 'Delete', :class => 'button deleteTokenButton' %>
        </p>
      </form>
    <%- end -%>
  </div>
</div>
