<% content_for :head do %>
  <%= rendered_stylesheet_tag 'profile-edit' %>
  <title><%= t('screens.profile.edit.app_tokens.title_full') %> | <%= CurrentDomain.strings.site_title %></title>
<% end %>

<% content_for :skip_links do %>
  <%- unless params[:no_js].present? -%>
    <%= link_to t('core.no_js'), '?no_js=true' %>
  <%- end -%>
<% end %>

<%= render :partial => 'edit_nav' %>

<div class="contentBox withLeftNavigation editProfile editAppTokens">
  <% link_to profile_path(current_user), :class => 'button backButton leftArrowNoHover' do %>
    <span class="icon"></span>
    <%= t('screens.profile.edit.back_link') %>
  <% end %>
  <div class="content">
    <div class="editAppTokensForm editForm">
      <h1><%= t('screens.profile.edit.app_tokens.title_full') %></h1>
      <%= display_standard_flashes %>
      <div class="createNewToken editArea<%= ' hide' unless params[:no_js].present? %>">
        <%= render :partial => 'edit_app_tokens_form' %>
      </div>
     <div class="existingTokens<%= ' noTokensYet' if @app_tokens.blank? %>">
        <%- @app_tokens.each do |token| -%>
          <div class="tokenFieldsDisplay">
            <%= render :partial => 'app_token_display', :locals => {
                :edit => true, :token => token
                } %>
          </div>
        <%- end -%>
      </div>
    </div>

    <%- unless params[:no_js].present? -%>
      <%= render :partial => 'edit_account_form' %>
      <%= form_tag(profile_path(current_user), :id => "editProfileForm", :multipart => true,
                  :class => 'commonForm', :method => :put) do %>
      <%= render :partial => 'edit_form' %>
      <%= render :partial => 'edit_image_form' %>
      <%- end -%>
    <%- end -%>
  </div>
</div>

<%= profile_user_zoom %>

<% content_for :js_footer do %>
  <%- unless params[:no_js].present? -%>
    <%= include_javascripts 'screen-profile-edit' %>
  <%- end -%>
<% end %>
