@import dataCards/ellipsis
@import dataCards/common/colors

$fgColor: #333
$bgColor: #4a525a

body
  background: $bgColor
  color: white
  font-family: 'myriad-pro', 'Helvetica Neue', Helvetica, Arial, sans-serif
  font-size: 14px
  font-weight: 200
  margin: 0

// Begin workaround for OSX + chrome + Magic Mouse hiding scrollbars by default.
// Not only does this cause our scrollable content to be rather undiscoverable,
// it messes with our jquery resize plugin.
::-webkit-scrollbar
  width: 9px

::-webkit-scrollbar-track
  -webkit-border-radius: 5px
  border-radius: 0
  width: 5px
  background: rgba(0,0,0,0.1)

::-webkit-scrollbar-thumb
  -webkit-border-radius: 5px
  border-radius: 5px
  width: 5px
  background: rgba(0,0,0,0.2)

::-webkit-scrollbar-thumb:hover
  background: rgba(0,0,0,0.4)

::-webkit-scrollbar-thumb:window-inactive
  background: rgba(0,0,0,0.05)

::-webkit-scrollbar-corner
  background: rgba(0,0,0,0.1)

h1
  margin: 0
  font-size: 1.5em

a
  color: #696969
  text-decoration: none

.invisible
  visibility: hidden

.transparent
  opacity: 0

.hint
  color: #aaa

.italicize
  font-style: italic

.lowercase
  text-transform: lowercase

$quickFilterBarHeight: 40px
$cardBorder: 2px
$pageNameLineHeight: 1.5rem
$pageNameMaxLineCount: 2
.cards-view
  .pageName
    position: absolute
    top: 0
    @include multiline-with-ellipsis($pageNameMaxLineCount, $pageNameLineHeight, $bgColor)
  // The multiline-with-ellipsis mixin requires a fixed height on the content regardless
  // of whether or not the content is wrapping. So, we take the ellipsified content out
  // of layout and instead use this pageNameMeasuringStick to reserve the right amount
  // of space.
  .pageNameMeasuringStick
    visibility: hidden
    line-height: $pageNameLineHeight
    max-height: $pageNameLineHeight * $pageNameMaxLineCount

  .hideableMetadata
    margin: 15px

$card-padding: 0
// Card should not assume padding or margin.
// Containers within card should have control over padding and margin of card content.
$card-title-expanded-bg-color: #aaa
$card-title-padding: 5px
$card-title-margin-right: 35px
$card-title-line-height: 1.2em
$card-description-max-line-count: 2
$card-description-line-height: 1.3em
$card-description-transition-duration: 0.5s
.card

  .description
    position: relative
    line-height: $card-description-line-height
    padding-right: 30px
    color: $lt-grey-font-color-rgba
    .description-expand-button
      display: none
      position: absolute
      visibility: collapse
      font-family: "SSAir"
      right: 0
      bottom: 0
      width: 15px
      height: 25px
      span
        /* Can't set separate cursor prop on pseudo, so must be a separate element. */
        cursor: pointer
        font-size: 0.7rem
        &:before
          content: "\F500"
    .description-expanded-wrapper
      position: absolute
      overflow: hidden
      opacity: 0.9
      .description-expanded-content
        color: #000
        background: rgba($card-bg-color, 0.9)
        overflow-y: auto
        overflow-x: hidden
        padding-bottom: 0
      top: 0
      display: block
      padding-right: 20px
      z-index: 1001
      /* z-index must override leaflet's z-index (1001) on choropleths */
      .description-expand-button
        display: block
    .description-truncated-content
      visibility: hidden

    &.clamped
      .description-expand-button
        visibility: visible

    &.collapsed
      max-height: $card-description-line-height * 2
      .description-expanded-wrapper
        .description-expanded-content
          visibility: collapse
        /* N.B this !important is here so that animations work - the initial max-height
           is set via jQuery, but this max-height here must override it if we're collapsed. */
        max-height: $card-description-line-height * 2 !important
      .description-truncated-content
        visibility: visible
      .description-expand-button span:before
        content: "\F501"

    &.with-animation
      .description-expanded-wrapper
        .description-expanded-content
          @include prefixer(transition-property, "visibility")
          @include prefixer(transition-duration, "0s")
          @include prefixer(transition-timing-function, "step-end")
          @include prefixer(transition-delay, "0")
        @include prefixer(transition-property, "max-height, z-index")
        @include prefixer(transition-duration, "#{$card-description-transition-duration}, 0s")
        @include prefixer(transition-timing-function, "ease, step-end")
        @include prefixer(transition-delay, "0, 0")
      .description-truncated-content
        @include prefixer(transition-property, "visibility")
        @include prefixer(transition-duration, "0")
        @include prefixer(transition-delay, "0")

      &.collapsed
        .description-expanded-wrapper
          .description-expanded-content
            @include prefixer(transition-duration, "0")
            @include prefixer(transition-delay, "#{$card-description-transition-duration}")
          @include prefixer(transition-duration, "#{$card-description-transition-duration}, #{$card-description-transition-duration}")
          @include prefixer(transition-delay, "0, #{$card-description-transition-duration}")
        .description-truncated-content
          @include prefixer(transition-delay, "#{$card-description-transition-duration}")

  .title-one-line
    line-height: $card-title-line-height
    display: inline-block
    font-weight: bold
    max-width: 100%
    .wrap
      overflow: hidden
      text-overflow: ellipsis
      white-space: nowrap
      margin-right: $card-title-margin-right + $card-title-padding

.onRight .card
  .title-expanded
    display: inline-block
    .wrap
      white-space: normal
    .wrap:hover
      overflow: visible

.onLeft .card
  .title-expanded
    display: inline-block
    .wrap:hover
      max-width: none

$top-nav-height: 40px
$facets-list-width: 20%

.facets-view
  ul
    position: absolute
    top: $top-nav-height
    bottom: 10px
    left: 0
    width: $facets-list-width
    li
      height: 20%

  .main-viz
    position: absolute
    top: $top-nav-height
    right: 10px
    bottom: 10px
    left: $facets-list-width
    background: #555


.mock-visualization
  opacity: 0.2
  width: 100%
  height: 100%
  div
    height: 100%

// The loading spinner is actually a sibling of cardVisualization* in the DOM but
// is styled here since the styles apply globally.

@keyframes loadingspin
  0%
    transform: rotateZ(0deg)
  100%
    transform: rotateZ(360deg)

@-webkit-keyframes loadingspin
  0%
    -webkit-transform: rotateZ(0deg)
  100%
    -webkit-transform: rotateZ(360deg)

@-moz-keyframes loadingspin
  0%
    -moz-transform: rotateZ(0deg)
  100%
    -moz-transform: rotateZ(360deg)

.spinner
  $spinner-size: 25px
  animation-duration: 0.7s
  animation-iteration-count: infinite
  animation-name: loadingspin
  animation-timing-function: linear
  -webkit-animation-duration: 0.7s
  -webkit-animation-iteration-count: infinite
  -webkit-animation-name: loadingspin
  -webkit-animation-timing-function: linear
  -moz-animation-duration: 0.7s
  -moz-animation-iteration-count: infinite
  -moz-animation-name: loadingspin
  -moz-animation-timing-function: linear
  display: none
  height: $spinner-size
  left: 50%
  margin-left: -$spinner-size / 2
  margin-top: -$spinner-size / 2
  position: absolute
  top: 50%
  width: $spinner-size
  z-index: 1001

.spinner.busy
  display: block

#ruler
  position: absolute
  left: -10000px
  visibility: hidden