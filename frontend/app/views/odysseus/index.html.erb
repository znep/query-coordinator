<%- content_for :head do -%>
  <title><%= @title %> | <%= get_site_title %></title>
  <%- @style_packages.each do |pkg| -%>
    <%= rendered_stylesheet_tag pkg %>
  <%- end -%>
<%- end -%>

<div id="janus">
  <%= raw @contents %>
</div>

<div id="requestStatus">
</div>

<div id="objectCache">
  <%- @objects.each do |obj| -%>
    <div id="<%= obj['key'] %>"><%= obj['value'] %></div>
  <%- end -%>
</div>

<%- content_for :js_footer do -%>
  <%- @script_packages.each do |pkg| -%>
    <%= include_webpack_bundle "open-data/#{pkg}.js" %>
  <%- end -%>
  <script type="text/javascript" src="/asset/js/socket.io?<%= @client_version %>"></script>
  <script type="text/javascript" src="/asset/js/client?<%= @client_version %>"></script>

  <script type="text/javascript">
    blist.configuration.newChartsEnabled = <%= module_enabled?(:new_charts) || true %>;
    blist.configuration.newMapsEnabled = <%= module_enabled?(:new_maps) == true %>;
    blist.configuration.oldChartsForced = <%= module_enabled?(:old_charts) == true %>;
    blist.configuration.govStatTargetToleranceEnabled = <%= module_enabled?(:govstat_target_tolerance) == true %>;
  </script>

  <%# TEMPORARY for using RTM %>
  <script type="text/javascript">
    blist.assets = blist.assets || {stylesheets: <%= raw stylesheet_assets.to_json %>};
  </script>
<%- end -%>

