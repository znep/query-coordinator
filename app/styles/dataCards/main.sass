@import dataCards/ellipsis


$fgColor: #333
$bgColor: #4a525a


.clearfix
  *zoom: 1

  &:before, &:after
    display: table
    content: ""
    // Fixes Opera/contenteditable bug:
    // http://nicolasgallagher.com/micro-clearfix-hack/#comment-36952
    line-height: 0
  &:after
  clear: both

body
  font-family: 'Open Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif
  weight: 200
  margin: 0

// Begin workaround for OSX + chrome + Magic Mouse hiding scrollbars by default.
// Not only does this cause our scrollable content to be rather undiscoverable,
// it messes with our jquery resize plugin.
::-webkit-scrollbar
  width: 9px

::-webkit-scrollbar-track
  -webkit-border-radius: 5px
  border-radius: 0
  width: 5px
  background: rgba(0,0,0,0.1)

::-webkit-scrollbar-thumb
  -webkit-border-radius: 5px
  border-radius: 5px
  width: 5px
  background: rgba(0,0,0,0.2)

::-webkit-scrollbar-thumb:hover
  background: rgba(0,0,0,0.4)

::-webkit-scrollbar-thumb:window-inactive
  background: rgba(0,0,0,0.05)

::-webkit-scrollbar-corner
  background: rgba(0,0,0,0.1)

h1
  margin: 0
  font-size: 1.5em

a
  color: #696969
  text-decoration: none

.hint
  color: #aaa

.sticky-link

  &:hover, &.active
    background-color: #ddd !important
    color: black !important

$quickFilterBarHeight: 40px
$cardBorder: 2px
$pageNameLineHeight: 1.5rem
$pageNameMaxLineCount: 2
.cards-view
  .pageName
    position: absolute
    top: 0
    @include multiline-with-ellipsis($pageNameMaxLineCount, $pageNameLineHeight, $bgColor)
  // The multiline-with-ellipsis mixin requires a fixed height on the content regardless
  // of whether or not the content is wrapping. So, we take the ellipsified content out
  // of layout and instead use this pageNameMeasuringStick to reserve the right amount
  // of space.
  .pageNameMeasuringStick
    visibility: hidden
    line-height: $pageNameLineHeight
    max-height: $pageNameLineHeight * $pageNameMaxLineCount

  .hideableMetadata
    margin: 15px
  .quickFilterBar
    color: white
    // Reserves space even if we're stuck.
    height: $quickFilterBarHeight
    margin: 0
    .content
      @include prefixer(box-sizing, border-box)
      height: $quickFilterBarHeight
      padding: 13px 0 0 15px
      background: #444
    &.stuck .content
      z-index: 1
      position: fixed
      top: 0
      right: 0
      left: 0

  .card
    @include prefixer(box-sizing, border-box)
    border: $cardBorder solid #bbb

  .collapsedLayout
    .cardSize1
      height: 300px + $cardBorder * 2
    .cardSize2
      height: 250px + $cardBorder * 2
    .cardSize3
      height: 200px + $cardBorder * 2

  .expandedLayout
    .expandedCards
      // top is set in JS
      position: fixed
      top: 0
      left: 35%
      right: 0
      bottom: 2px
      .card
        //NOTE: This currently only supports one expanded card. This is acceptable for the MVP.
        position: absolute
        top: 0
        right: 0
        bottom: 0
        left: 0
    .collapsedCards
      width: 35%
      .cardSize1
        height: 250px + $cardBorder * 2
      .cardSize2
        height: 200px + $cardBorder * 2
      .cardSize3
        height: 150px + $cardBorder * 2

$card-bg-color: #eee
$card-padding: 0
// Card should not assume padding or margin.
// Containers within card should have control over padding and margin of card content.
$card-title-expanded-bg-color: #aaa
$card-title-padding: 5px
$card-title-margin-right: 35px
$card-title-line-height: 1.2em
$card-description-max-line-count: 2
$card-description-line-height: 1.3em
$card-description-transition-duration: 0.5s
.card

  .description
    position: relative
    line-height: $card-description-line-height
    padding-right: 30px
    .description-expand-button
      display: none
      position: absolute
      visibility: collapse
      font-family: "SSAir"
      right: 0
      bottom: 0
      width: 15px
      height: 25px
      span
        /* Can't set separate cursor prop on pseudo, so must be a separate element. */
        cursor: pointer
        font-size: 0.7rem
        &:before
          content: "\F500"
    .description-expanded-wrapper
      position: absolute
      overflow: hidden
      .description-expanded-content
        background: rgba($card-bg-color, 0.9)
        overflow-y: auto
        overflow-x: hidden
      top: 0
      display: block
      padding-right: 20px
      z-index: 5
      .description-expand-button
        display: block
    .description-truncated-content
      visibility: hidden

    &.clamped
      .description-expand-button
        visibility: visible

    &.collapsed
      max-height: $card-description-line-height * 2
      .description-expanded-wrapper
        .description-expanded-content
          visibility: collapse
        /* N.B this !important is here so that animations work - the initial max-height
           is set via jQuery, but this max-height here must override it if we're collapsed. */
        max-height: $card-description-line-height * 2 !important
      .description-truncated-content
        visibility: visible
      .description-expand-button span:before
        content: "\F501"

    &.with-animation
      .description-expanded-wrapper
        .description-expanded-content
          @include prefixer(transition-property, "visibility")
          @include prefixer(transition-duration, "0s")
          @include prefixer(transition-timing-function, "step-end")
          @include prefixer(transition-delay, "0")
        @include prefixer(transition-property, "max-height, z-index")
        @include prefixer(transition-duration, "#{$card-description-transition-duration}, 0s")
        @include prefixer(transition-timing-function, "ease, step-end")
        @include prefixer(transition-delay, "0, 0")
      .description-truncated-content
        @include prefixer(transition-property, "visibility")
        @include prefixer(transition-duration, "0")
        @include prefixer(transition-delay, "0")

      &.collapsed
        .description-expanded-wrapper
          .description-expanded-content
            @include prefixer(transition-duration, "0")
            @include prefixer(transition-delay, "#{$card-description-transition-duration}")
          @include prefixer(transition-duration, "#{$card-description-transition-duration}, #{$card-description-transition-duration}")
          @include prefixer(transition-delay, "0, #{$card-description-transition-duration}")
        .description-truncated-content
          @include prefixer(transition-delay, "#{$card-description-transition-duration}")

  .title-one-line
    line-height: $card-title-line-height
    display: inline-block
    font-weight: bold
    max-width: 100%
    .wrap
      overflow: hidden
      text-overflow: ellipsis
      white-space: nowrap
      margin-right: $card-title-margin-right + $card-title-padding

.onRight .card
  .title-expanded
    display: inline-block
    .wrap
      white-space: normal
    .wrap:hover
      overflow: visible

.onLeft .card
  .title-expanded
    display: inline-block
    .wrap:hover
      max-width: none

.card.expanded
  .expandButton a
    &:before
      content: 'Ó∏Å'

$top-nav-height: 40px
$facets-list-width: 20%

.facets-view
  ul
    position: absolute
    top: $top-nav-height
    bottom: 10px
    left: 0
    width: $facets-list-width
    li
      height: 20%

  .main-viz
    position: absolute
    top: $top-nav-height
    right: 10px
    bottom: 10px
    left: $facets-list-width
    background: #555

