<%- isAddingEnabled = false -%>
<% content_for :head do %>
  <%= stylesheet_link_merged 'contacts-index' %>
  <title><%= CurrentDomain.strings.site_title %></title>
<% end %>



<div class="twoColumnContainer tabContainer clearfix">
  <div id="mainColumnContent" class="column mainContent scrollContentColumn">
    <div id='contacts'>
      <%= render(:partial => "shared/tabs") %>

      <div class='outerContent'>
        <div class='content'>
          
          <%- if @contacts.length > 0 -%>
          
          <div class='headerBar clearfix'>
            <h3 id='listTitle' class='clipText'
              title='<%= @title %>'><%= @title %></h3>

            <form class="search contactsFind" action='#'>
              <p>
                <input type='text' class='textPrompt' name='find'
                  title='Search for my Friends' value='' />
                <input type='image' class='submit' name='findSubmit'
                  src="<%= image_path("find_button.png") %>" />
              </p>
            </form>
<%- if isAddingEnabled -%>
            <ul class="headerActions">
              <li><a href='#' class="add_contact">Add Contact</a></li>
            </ul>
<%- end -%>
          </div>

          <div class='gridListContainer'>
            <%#
             This div will hold a copy of the table that displays the header
            %>
            <div class='headerContainer'></div>
            <div class='gridListInner scrollContent'>
              <%= render(:partial => "contact_list") %>
            </div>
          </div>
          
          <%- else -%>
          
          <div class='headerBar clearfix'>
            <h3 id='listTitle' class='clipText'
              title='<%= @title %>'><%= @title %></h3>
          </div>
          
          <div class='noContactsContainer'>
            <p>You haven't added any friends yet. Add friends by clicking the <strong>Add Friend</strong> button on a member's profile page.</p>
            <p>You can view our Top Members or search for Friends on the <%= link_to("Community page", community_path) %>.</p>
          </div>
          
          <%- end -%>

        </div>
      </div>

      <div id="infoPane" class='metadataPane'></div>
    </div>
  </div>

  <div id="sidebar" class="column scrollContentColumn">
    <% render(:layout => "shared/sidebar_box") do %>
      <%= render(:partial => "shared/current_user_tile",
        :locals => { :user => current_user }) %>
      <ul class="actionButtons blockList clearfix">
        <li>
          <%= link_to("Find Friends", community_path,
              :title => "Search for other users") %>
        </li>
        <li>
          <%= link_to("Invite Others", invite_path, :title => "Invite others to try #{CurrentDomain.strings.company}", :rel => "modal") %>
        </li>
      </ul>
    <% end %>

    <% render(:layout => "shared/sidebar_box",
      :locals => { :id => 'contactFilters',
      :content_class => 'scrollContent' } ) do %>
      <div class='filterSection items expandableContainer'>
        <a href="#expand_items" class="expander">expand</a>
        <h4>
          <%= sidebar_filter_link("<span>All Friends</span>",
            {'type' => 'friend'}, @args, true) %>
        </h4>
        <ul class="expandable">
          <li>
            <%= sidebar_filter_link("<span>I Have Shared With</span>",
              {'share_direction' => 'out'}, @args) %>
          </li>
          <li>
            <%= sidebar_filter_link("<span>Have Shared To Me</span>",
              {'share_direction' => 'in'}, @args) %>
          </li>
        </ul>
      </div>

      <div class='filterSection closed tags expandableContainer'>
        <a href="#expand_items" class="expander">expand</a>
        <h4>
          <%= sidebar_filter_link("<span>All Tags</span>",
            {'untagged' => 'false'}, @args) %>
        </h4>
        <ul class="expandable">
          <li class='untagged'>
            <%= sidebar_filter_link("<span>Not Tagged</span>",
              {'untagged' => 'true'}, @args) %>
          </li>
          <% get_contact_tags().each do |tag| %>
          <li>
            <%= sidebar_filter_link("<span>#{h(tag)}</span>",
              {'tag' => tag}, @args) %>
          </li>
          <% end %>
        </ul>
      </div>
    <% end %>
  </div>
</div>

<% content_for :js_footer do %>
  <%= javascript_include_merged 'shared-common-all' %>
  <%= javascript_include_merged 'contacts-index' %>
<% end %>
