<% content_for :head do %>
  <%= rendered_stylesheet_tag 'dataset-edit-metadata-page' %>
  <title>Edit Dataset Metadata | <%= CurrentDomain.strings.site_title %></title>
<% end %>

<% content_for :skip_links do %>
  <a href="?no_js=true">Disable Javascript on this page</a>
<% end %>

<div class="contentBox">
  <% form_tag({}, {:id => "editMetadataForm", :class => 'commonForm', :method => :put}) do %>
    <h1>Edit Metadata for <%= @view.name %></h1>
    <a href="<%= @view.href %>" class="returnLink">Return to Dataset</a>

    <%= display_standard_flashes %>

    <h2>General Information</h2>

    <div class="line clearfix">
      <label for="view_name" class="required">Dataset Title</label>
      <%= text_field_tag("view[name]", @view.name, :title => "Enter a title", :class => "textPrompt") %>
    </div>

    <div class="line clearfix">
      <label for="view_description">Short Description</label>
      <%= text_area_tag("view[description]", @view.description, :title => "Enter a description", :class => "textPrompt") %>
    </div>

    <div class="line clearfix">
      <label for="view_category">Type of Dataset</label>
      <%= select_tag("view[category]", category_select_options(h(@view.category.nil? ? '' : @view.category.capitalize))) %>
    </div>

    <div class="line clearfix">
      <label for="view_tags">Tags / Keywords</label>
      <%= text_field_tag("view[tags]", @view.tags.nil? ? '' : @view.tags.join(', '), :title => "Enter keywords", :class => "textPrompt") %>
      <div class="additionalHelp">Enter one or more keywords separated by commas</div>
    </div>

    <h2>Licensing &amp; Attribution</h2>

    <div class="line clearfix">
      <label for="view_licenseId">Licensing</label>
      <%= select_tag("view[licenseId]", merged_license_select_options(h(@view.license.nil? ? '' : @view.license.capitalize))) %>
      <div class="additionalHelp">Choose licensing terms for people who wish to use this dataset.</div>
    </div>

    <div class="line clearfix">
      <label for="view_attribution">Data Provided By</label>
      <%= text_field_tag("view[attribution]", @view.attribution, :title => "Individual or Organization", :class => "textPrompt") %>
    </div>

    <div class="line clearfix">
      <label for="view_attributionLink">Source Link</label>
      <%= text_field_tag("view[attributionLink]", @view.attributionLink, :title => "Enter Web Address", :class => "textPrompt") %>
    </div>

    <div class="required">Required Field</div>
    <div class="clearfix submitActions">
      <input class="button submitButton" type="submit" title="Save changes" value="Save" />
      <a class="button" href="<%= @view.href %>">Cancel</a>
    </div>
  <%- end -%>
</div>

<% content_for :js_footer do %>
  <%- unless params[:no_js] == 'true' -%>
    <%= javascript_include_merged 'screen-dataset-edit-metadata' %>
  <%- end -%>
<% end %>
