@import dataCards/common/colors
@import dataCards/common/layout

.card
  border-radius: $rounded-corners-border-radius
  padding: $card-padding
  color: $lt-grey-font-color
  background: $card-bg-color
  box-sizing: border-box
  -moz-box-sizing: border-box
  overflow: hidden

  // This appears to keep elements with the .wrap and
  // .title-expanded classes in the right box context.
  // Without this position: relative, the content will
  // be relative to the card, not the card content.
  .card-text
    position: relative

  .title-one-line
    line-height: $card-title-line-height
    font-weight: normal
    text-transform: uppercase
    color: $filtered-region-bg-color-1
    display: block
    padding-bottom: 5px

    &:hover

      // This z-index must be higher than that of the desciption.
      + .title-expanded
        z-index: 1002

        .wrap
          opacity: 1
          overflow: visible

  .title-expanded
    @extend .title-one-line
    position: absolute
    top: 0
    left: 0
    overflow: visible
    z-index: -1

    // This z-index must be higher than that of the desciption.
    &:hover
      z-index: 1002

    .wrap
      max-width: 100%
      overflow: hidden
      display: inline-block
      opacity: 0
      font-size: inherit
      white-space: initial
      background-color: $card-bg-color
      &:hover
        opacity: 1
        overflow: visible

  .description
    padding-bottom: 1rem

    .description-truncated-content
      position: relative
      z-index: 2

    .description-expand-button
      color: $expand-button-color
      background-color: $card-bg-color

    &.collapsed .description-expanded-wrapper
      background: transparent

    .description-expanded-wrapper
      background: $card-bg-color
      z-index: 1

  .card-visualization
    height: 100%

  // A minimum height of 350px is required to prevent d3 from
  // flipping out and literally flipping column charts negatively
  // along the y-axis due to lack of sufficient element height.
  &.expanded
    min-height: 350px

    .card-text
      .description
        padding-bottom: $card-description-padding-bottom

    .expand-button
      span:before
        content: 'Ó∏Å'

// This fixes a problem where, among other things, the spinner on
// choropleth cards is not vertically centered when it should be.
div[ng-switch="cardType"]
  position: relative
