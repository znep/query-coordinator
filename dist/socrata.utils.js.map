{"version":3,"file":"socrata.utils.js","sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 9b4137dfd9a1f63a831e","webpack:///./src/index.js","webpack:///./src/utils.js","webpack:///./~/es6-promise-polyfill/promise.js","webpack:///(webpack)/~/node-libs-browser/~/timers-browserify/main.js","webpack:///(webpack)/~/node-libs-browser/~/process/browser.js","webpack:///./src/Analytics.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"_\"), require(\"jQuery\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"_\", \"jQuery\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"utils\"] = factory(require(\"_\"), require(\"jQuery\"));\n\telse\n\t\troot[\"socrata\"] = root[\"socrata\"] || {}, root[\"socrata\"][\"utils\"] = factory(root[\"_\"], root[\"jQuery\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 9b4137dfd9a1f63a831e\n **/","var utils = require('./utils');\nvar Analytics = require('./Analytics');\n\nutils.Analytics = Analytics;\nmodule.exports = utils;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/index.js\n ** module id = 0\n ** module chunks = 0\n **/","'use strict';\n\nvar _ = require('lodash');\nvar $ = require('jquery');\n\nif (typeof window.Promise !== 'function') {\n  window.Promise = require('es6-promise-polyfill').Promise;\n}\n\nif (String.prototype.format) {\n  throw new Error(\n    'Cannot assign format function to String prototype: ' +\n    '`String.prototype.format` already exists.'\n  );\n}\n\nvar NUMBER_FORMATTER_MAGNITUDE_SYMBOLS = ['K', 'M', 'B', 'T', 'P', 'E', 'Z', 'Y'];\nvar MOUSE_WHEEL_EVENTS = 'mousewheel DOMMouseScroll MozMousePixelScroll';\n\n/**\n * Usage:\n *\n * 'Hello, {1}!'.format('World');\n * => 'Hello, World!'\n */\nvar formatWithArgs = function() {\n\n  var txt = this;\n  var i;\n\n  for (i = 0; i < arguments.length; i++) {\n    txt = txt.replace(new RegExp('\\\\{' + i + '\\\\}', 'gm'), arguments[i]);\n  }\n\n  return txt;\n};\n\n/**\n * Usage:\n *\n * 'Hello, {what}!'.format({ what: 'World'});\n * => 'Hello, World!'\n */\nvar formatWithObject = function(objectMaybe) {\n\n  var values = arguments[0];\n\n  return _(values).\n    chain().\n    keys().\n    reduce(\n      function(stringToFormat, key) {\n        return stringToFormat.replace(new RegExp('\\\\{' + key + '\\\\}', 'gm'), values[key]);\n      },\n      this\n    ).value();\n};\n\n/**\n * `format` is assigned to the String prototype at the bottom of this file.\n */\nvar format = function() {\n\n  if (!_.isPlainObject(arguments[0])) {\n    return formatWithArgs.apply(this, arguments);\n  } else {\n    return formatWithObject.apply(this, arguments);\n  }\n};\n\n/**\n * `escapeSpaces` is assigned to the String prototype at the bottom of this file.\n */\nvar escapeSpaces = function() {\n  return this.replace(/\\s/g, '\\u00A0');\n};\n\n/**\n * `CustomEvent` is assigned to the window at the bottom of this file.\n */\nvar CustomEvent = function(eventName, params) {\n\n  var customEventParams = _.merge(\n    { bubbles: false, cancelable: false, detail: undefined },\n    params\n  );\n\n  var customEvent = document.createEvent('CustomEvent');\n\n  customEvent.initCustomEvent(\n    eventName,\n    customEventParams.bubbles,\n    customEventParams.cancelable,\n    customEventParams.detail\n  );\n\n  return customEvent;\n};\n\nvar utils = {\n\n  assert: function(expression, message) {\n    if (!expression) {\n      throw new Error(message);\n    }\n  },\n\n  assertEqual: function(value1, value2) {\n\n    if (value1 !== value2) {\n      throw new Error(\n        'Value `{0}` must equal value `{1}`.'.format(value1, value2)\n      );\n    }\n  },\n\n  assertHasProperty: function(object, name, message) {\n\n    if (!_.has(object, name)) {\n\n      if (message) {\n        throw new Error(message);\n      }\n\n      throw new Error(\n        '`{0}` property must be present. Object has properties: [{1}].'.\n          format(name, Object.keys(object).join(', '))\n      );\n    }\n  },\n\n  assertHasProperties: function(object) {\n\n    var assertHasProperty = this.assertHasProperty;\n\n    // Apply all arguments (minus `object`)\n    // to assertHasProperty(object, argument).\n    _.each(\n      _.tail(arguments),\n      function(argument) {\n        assertHasProperty(object, argument);\n      }\n    );\n  },\n\n  /**\n   * Ensures the given value is of any of the provided types.\n   *\n   * @param {any} value - The value to check\n   * @param {...string} <arguments> - List of acceptable types\n   */\n  assertIsOneOfTypes: function(value) {\n\n    var types = _.tail(arguments);\n    var valid = _.includes(types, typeof value);\n\n    if (!valid) {\n      throw new Error(\n        'Value must be one of [{0}] (is of type {1}).'.\n          format(types.join(', '), (typeof value))\n      );\n    }\n  },\n\n  /**\n   * Asserts that an object is instanceof an instantiator.\n   *\n   * @param {object} instance - The instance to check.\n   * @param {function} instantiator - The instantiator to check against.\n   */\n  assertInstanceOf: function(instance, instantiator) {\n    utils.assertInstanceOfAny(instance, instantiator);\n  },\n\n  /**\n   * Asserts that an object is instanceof at least one of the provided instantiators.\n   *\n   * @param {object} instance - The instance to check.\n   * @param {...function} <arguments> - List of acceptable instantiators\n   */\n  assertInstanceOfAny: function(instance) {\n    var instantiators = _.tail(arguments);\n    var valid = _.some(instantiators, function(instantiator) {\n      return instance instanceof instantiator;\n    });\n\n    if (!valid) {\n      throw new Error(\n        'Value must be one of [{0}] (instance: {1}).'.\n          format(instantiators.join(', '), instance)\n      );\n    }\n  },\n\n  /**\n   * Asserts that the given collection is of the expected length.\n   *\n   * @param {Array | Array-like} collection - The collection to check.\n   * @param {Number} expectedLength - The expected length.\n   */\n  assertLengthIs: function(collection, expectedLength) {\n    this.assertHasProperty(collection, 'length');\n    this.assertIsOneOfTypes(expectedLength, 'number');\n    utils.assert(\n      collection.length === expectedLength,\n      'Expected `{0}` to have length {1}, was {2}.'.format(collection, expectedLength, collection.length)\n    );\n  },\n\n  valueIsBlank: function(value) {\n    return _.isUndefined(value) || _.isNull(value) || value === '';\n  },\n\n  /**\n   * Returns a human readable version of a number, formatted to 4 characters.\n   * options can include a groupCharacter, which defaults to the comma character,\n   * and a decimalCharacter which defaults to the period.\n   *\n   * Example:\n   *\n   * formatNumber(12345);\n   *   => '12.3K'\n   */\n  formatNumber: function(value, options) {\n\n    if (!_.isNumber(value)) {\n      throw new Error('`.formatNumber()` requires numeric input.');\n    }\n\n    var defaultOptions = {\n      groupCharacter: ',',\n      decimalCharacter: '.'\n    };\n    var formatNumberOptions = _.assign({}, defaultOptions, options);\n\n    var val = parseFloat(value);\n    var absVal = Math.abs(val);\n    var maxLength = 4;\n    var newValue;\n    var symbolIndex;\n\n    if (absVal < .001) {\n\n      return val.toString();\n\n    } else if (absVal < 9999.5) {\n\n      // This branch handles everything that doesn't use a magnitude suffix.\n      // Thousands less than 10K are commaified.\n      var parts = absVal.toString().split('.').concat('');\n      var precision = Math.min(parts[1].length, maxLength - parts[0].length);\n\n      return this.commaify(val.toFixed(precision), formatNumberOptions);\n\n    } else if (/e/i.test(val)) {\n\n      // This branch handles huge numbers that switch to exponent notation.\n      var exponentParts = val.toString().split(/e\\+?/i);\n      symbolIndex = Math.floor(parseFloat(exponentParts[1]) / 3) - 1;\n      newValue = exponentParts[0];\n\n      var shiftAmount = parseFloat(exponentParts[1]) % 3;\n\n      if (shiftAmount > 0) {\n\n        // Adjust from e.g. 1.23e+4 to 12.3K\n        newValue = newValue.replace(/^(-?\\d+)(\\.\\d+)?$/, function(match, whole, frac) {\n\n          frac = frac || '.000';\n\n          return '{0}.{1}'.format(whole + frac.slice(1, 1 + shiftAmount), frac.slice(shiftAmount));\n        });\n      }\n\n      newValue = parseFloat(Math.abs(newValue)).toFixed(maxLength - shiftAmount - 1);\n\n    } else {\n\n      // This branch handles values that need a magnitude suffix.\n      // We use commaify to determine what magnitude we're operating in.\n      var magnitudeGroups = this.commaify(absVal.toFixed(0)).split(',');\n      symbolIndex = magnitudeGroups.length - 2;\n      newValue = parseFloat(magnitudeGroups[0] + '.' + magnitudeGroups[1]);\n      newValue = newValue.toFixed(maxLength - magnitudeGroups[0].length - 1);\n\n    }\n\n    // The one edge case to handle is when 999.9[KMB...] rounds up, which\n    // bumps us into the next magnitude.\n    if (newValue === '1000') {\n\n      newValue = '1';\n      symbolIndex++;\n\n    }\n\n    if (!_.isUndefined(NUMBER_FORMATTER_MAGNITUDE_SYMBOLS[symbolIndex])) {\n\n      // {negative?}{value}{magnitude}\n      return '{0}{1}{2}'.format(\n        val < 0 ? '-' : '',\n        parseFloat(newValue).toString().replace('.', formatNumberOptions.decimalCharacter),\n        NUMBER_FORMATTER_MAGNITUDE_SYMBOLS[symbolIndex]\n      );\n\n    } else {\n\n      return val.toString();\n\n    }\n\n    this.assert(false, 'Call to `.formatNumber()` was not handled by any format branch.');\n  },\n\n  // Given a number or a string representing a number, returns a string delimited\n  // by options.groupCharacter (default ,) that separates digits into groups of 3.\n  // The decimal portion will be separated by options.decimalCharacter (default .).\n  commaify: function(value, options) {\n\n    value = String(value);\n\n    var defaultOptions = {\n      groupCharacter: ',',\n      decimalCharacter: '.'\n    };\n\n    var commaifyOptions = _.assign({}, defaultOptions, options);\n\n    var pos = value.indexOf(defaultOptions.decimalCharacter);\n\n    if (pos === -1) {\n      pos = value.length;\n    } else {\n      value = value.replace(defaultOptions.decimalCharacter, commaifyOptions.decimalCharacter);\n    }\n\n    pos -= 3;\n\n    while (pos > 0 && value.charAt(pos - 1) >= '0' && value.charAt(pos - 1) <= '9') {\n      value = value.substring(0, pos) + commaifyOptions.groupCharacter + value.substring(pos);\n      pos -= 3;\n    }\n\n    return value;\n  },\n\n  /**\n   * Controls page scrolling behavior when inside the given element.\n   * If enable is true, isolates scrolling to given element when inside by preventing\n   * scrolling from bubbling up to the document. (If outside element, page scrolling\n   * behaves as usual).\n   * If set to false, disables scrolling isolation, and re-enables page scrolling.\n   *\n   * @param {jQuery wrapped DOM} $element - the element on which to isolate scrolling behavior\n   * @param {boolean} enable - whether to isolate scrolling to element and prevent page scrolling\n   */\n  isolateScrolling: function($element, enable) {\n    window.isolateScrolling$ = $;\n\n    var hasPreventPageScrolling;\n    var needToRegister;\n    var needToUnregister;\n\n    this.assertInstanceOf($element, window.jQuery);\n    this.assert($element.length === 1, '`element` selection must have length 1');\n    this.assertIsOneOfTypes(enable, 'boolean');\n\n    hasPreventPageScrolling = $element[0].hasOwnProperty('preventPageScrolling');\n\n    needToRegister = enable && !hasPreventPageScrolling;\n    needToUnregister = !enable && hasPreventPageScrolling;\n\n    if (needToRegister) {\n      // Helper to prevent page scrolling when inside the given element\n      $element[0].preventPageScrolling = function(e) {\n\n        // Base prevention of page scrolling on scroll status of the given element\n        var scrollingElement = $(this);\n        var scrollTop = scrollingElement.scrollTop();\n\n        // IE/Chrome/Safari use 'wheelDelta', Firefox uses 'detail'\n        var scrollingUp = e.originalEvent.wheelDelta > 0 || e.originalEvent.detail < 0;\n\n        if (scrollingUp) {\n\n          // At top\n          if (scrollTop === 0) {\n            e.preventDefault();\n          }\n        } else {\n          var innerHeight = scrollingElement.innerHeight();\n          var scrollHeight = scrollingElement[0].scrollHeight;\n\n\n          // At bottom\n          if (scrollTop >= scrollHeight - innerHeight) {\n            e.preventDefault();\n          }\n        }\n      };\n\n      $element.on(MOUSE_WHEEL_EVENTS, $element[0].preventPageScrolling);\n    } else if (needToUnregister) {\n      $element.off(MOUSE_WHEEL_EVENTS, $element[0].preventPageScrolling);\n      delete $element[0].preventPageScrolling;\n    }\n  },\n\n  /**\n   * Gets the value of a cookie by name.\n   *\n   * @param {String} cookieName\n   */\n  getCookie: function(cookieName) {\n    var name = cookieName + '=';\n    var cookies = document.cookie.split(/;\\s*/);\n\n    for(var i = 0; i < cookies.length; i++) {\n      var cookie = cookies[i];\n\n      if (cookie.indexOf(name) === 0) {\n        return cookie.replace(name, '');\n      }\n    }\n  },\n\n  /**\n   * Serializes a Date object into a floating timestamp.\n   * NOTE: Untestable due to time zone dependency.\n   *\n   * @param {Date} date to serialize\n   */\n  serializeFloatingTimestamp: function(date) {\n    function formatToTwoPlaces(value) {\n      return (value < 10) ?\n        '0' + value.toString() :\n        value.toString();\n    }\n\n    // The month component of JavaScript dates is 0-indexed\n    // (I have no idea why) so when we are serializing a\n    // JavaScript date as ISO-8601 date we need to increment\n    // the month value.\n    return '{0}-{1}-{2}T{3}:{4}:{5}'.format(\n      date.getFullYear(),\n      formatToTwoPlaces(date.getMonth() + 1),\n      formatToTwoPlaces(date.getDate()),\n      formatToTwoPlaces(date.getHours()),\n      formatToTwoPlaces(date.getMinutes()),\n      formatToTwoPlaces(date.getSeconds())\n    );\n  },\n\n  /**\n   * Deserializes an ISO-8601 timestamp to a Date object.\n   * NOTE: Untestable due to time zone dependency.\n   *\n   * @param {String} timestamp to deserialize\n   */\n  deserializeFloatingTimestamp: function(timestamp) {\n    if (timestamp.length < 19 || isNaN(new Date(timestamp).getTime())) {\n      throw new Error(\n        'Could not parse floating timestamp: \"{0}\" is not a valid ISO-8601 date.'.\n          format(timestamp)\n      );\n    }\n\n    // The month component of JavaScript dates is 0-indexed\n    // (I have no idea why) so when we are deserializing a\n    // properly-formatted ISO-8601 date we need to decrement\n    // the month value.\n    return new Date(\n      timestamp.substring(0, 4),\n      timestamp.substring(5, 7) - 1,\n      timestamp.substring(8, 10),\n      timestamp.substring(11, 13),\n      timestamp.substring(14, 16),\n      timestamp.substring(17, 19)\n    );\n  }\n};\n\n// Attach `.format()` and `.escapeSpaces()` to String.prototype.\nString.prototype.format = format;\nString.prototype.escapeSpaces = escapeSpaces;\n\n// Add CustomEvent to the window.\nCustomEvent.prototype = window.Event.prototype;\nwindow.CustomEvent = CustomEvent;\n\nmodule.exports = utils;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/utils.js\n ** module id = 1\n ** module chunks = 0\n **/","(function(global){\n\n//\n// Check for native Promise and it has correct interface\n//\n\nvar NativePromise = global['Promise'];\nvar nativePromiseSupported =\n  NativePromise &&\n  // Some of these methods are missing from\n  // Firefox/Chrome experimental implementations\n  'resolve' in NativePromise &&\n  'reject' in NativePromise &&\n  'all' in NativePromise &&\n  'race' in NativePromise &&\n  // Older version of the spec had a resolver object\n  // as the arg rather than a function\n  (function(){\n    var resolve;\n    new NativePromise(function(r){ resolve = r; });\n    return typeof resolve === 'function';\n  })();\n\n\n//\n// export if necessary\n//\n\nif (typeof exports !== 'undefined' && exports)\n{\n  // node.js\n  exports.Promise = nativePromiseSupported ? NativePromise : Promise;\n  exports.Polyfill = Promise;\n}\nelse\n{\n  // AMD\n  if (typeof define == 'function' && define.amd)\n  {\n    define(function(){\n      return nativePromiseSupported ? NativePromise : Promise;\n    });\n  }\n  else\n  {\n    // in browser add to global\n    if (!nativePromiseSupported)\n      global['Promise'] = Promise;\n  }\n}\n\n\n//\n// Polyfill\n//\n\nvar PENDING = 'pending';\nvar SEALED = 'sealed';\nvar FULFILLED = 'fulfilled';\nvar REJECTED = 'rejected';\nvar NOOP = function(){};\n\nfunction isArray(value) {\n  return Object.prototype.toString.call(value) === '[object Array]';\n}\n\n// async calls\nvar asyncSetTimer = typeof setImmediate !== 'undefined' ? setImmediate : setTimeout;\nvar asyncQueue = [];\nvar asyncTimer;\n\nfunction asyncFlush(){\n  // run promise callbacks\n  for (var i = 0; i < asyncQueue.length; i++)\n    asyncQueue[i][0](asyncQueue[i][1]);\n\n  // reset async asyncQueue\n  asyncQueue = [];\n  asyncTimer = false;\n}\n\nfunction asyncCall(callback, arg){\n  asyncQueue.push([callback, arg]);\n\n  if (!asyncTimer)\n  {\n    asyncTimer = true;\n    asyncSetTimer(asyncFlush, 0);\n  }\n}\n\n\nfunction invokeResolver(resolver, promise) {\n  function resolvePromise(value) {\n    resolve(promise, value);\n  }\n\n  function rejectPromise(reason) {\n    reject(promise, reason);\n  }\n\n  try {\n    resolver(resolvePromise, rejectPromise);\n  } catch(e) {\n    rejectPromise(e);\n  }\n}\n\nfunction invokeCallback(subscriber){\n  var owner = subscriber.owner;\n  var settled = owner.state_;\n  var value = owner.data_;  \n  var callback = subscriber[settled];\n  var promise = subscriber.then;\n\n  if (typeof callback === 'function')\n  {\n    settled = FULFILLED;\n    try {\n      value = callback(value);\n    } catch(e) {\n      reject(promise, e);\n    }\n  }\n\n  if (!handleThenable(promise, value))\n  {\n    if (settled === FULFILLED)\n      resolve(promise, value);\n\n    if (settled === REJECTED)\n      reject(promise, value);\n  }\n}\n\nfunction handleThenable(promise, value) {\n  var resolved;\n\n  try {\n    if (promise === value)\n      throw new TypeError('A promises callback cannot return that same promise.');\n\n    if (value && (typeof value === 'function' || typeof value === 'object'))\n    {\n      var then = value.then;  // then should be retrived only once\n\n      if (typeof then === 'function')\n      {\n        then.call(value, function(val){\n          if (!resolved)\n          {\n            resolved = true;\n\n            if (value !== val)\n              resolve(promise, val);\n            else\n              fulfill(promise, val);\n          }\n        }, function(reason){\n          if (!resolved)\n          {\n            resolved = true;\n\n            reject(promise, reason);\n          }\n        });\n\n        return true;\n      }\n    }\n  } catch (e) {\n    if (!resolved)\n      reject(promise, e);\n\n    return true;\n  }\n\n  return false;\n}\n\nfunction resolve(promise, value){\n  if (promise === value || !handleThenable(promise, value))\n    fulfill(promise, value);\n}\n\nfunction fulfill(promise, value){\n  if (promise.state_ === PENDING)\n  {\n    promise.state_ = SEALED;\n    promise.data_ = value;\n\n    asyncCall(publishFulfillment, promise);\n  }\n}\n\nfunction reject(promise, reason){\n  if (promise.state_ === PENDING)\n  {\n    promise.state_ = SEALED;\n    promise.data_ = reason;\n\n    asyncCall(publishRejection, promise);\n  }\n}\n\nfunction publish(promise) {\n  var callbacks = promise.then_;\n  promise.then_ = undefined;\n\n  for (var i = 0; i < callbacks.length; i++) {\n    invokeCallback(callbacks[i]);\n  }\n}\n\nfunction publishFulfillment(promise){\n  promise.state_ = FULFILLED;\n  publish(promise);\n}\n\nfunction publishRejection(promise){\n  promise.state_ = REJECTED;\n  publish(promise);\n}\n\n/**\n* @class\n*/\nfunction Promise(resolver){\n  if (typeof resolver !== 'function')\n    throw new TypeError('Promise constructor takes a function argument');\n\n  if (this instanceof Promise === false)\n    throw new TypeError('Failed to construct \\'Promise\\': Please use the \\'new\\' operator, this object constructor cannot be called as a function.');\n\n  this.then_ = [];\n\n  invokeResolver(resolver, this);\n}\n\nPromise.prototype = {\n  constructor: Promise,\n\n  state_: PENDING,\n  then_: null,\n  data_: undefined,\n\n  then: function(onFulfillment, onRejection){\n    var subscriber = {\n      owner: this,\n      then: new this.constructor(NOOP),\n      fulfilled: onFulfillment,\n      rejected: onRejection\n    };\n\n    if (this.state_ === FULFILLED || this.state_ === REJECTED)\n    {\n      // already resolved, call callback async\n      asyncCall(invokeCallback, subscriber);\n    }\n    else\n    {\n      // subscribe\n      this.then_.push(subscriber);\n    }\n\n    return subscriber.then;\n  },\n\n  'catch': function(onRejection) {\n    return this.then(null, onRejection);\n  }\n};\n\nPromise.all = function(promises){\n  var Class = this;\n\n  if (!isArray(promises))\n    throw new TypeError('You must pass an array to Promise.all().');\n\n  return new Class(function(resolve, reject){\n    var results = [];\n    var remaining = 0;\n\n    function resolver(index){\n      remaining++;\n      return function(value){\n        results[index] = value;\n        if (!--remaining)\n          resolve(results);\n      };\n    }\n\n    for (var i = 0, promise; i < promises.length; i++)\n    {\n      promise = promises[i];\n\n      if (promise && typeof promise.then === 'function')\n        promise.then(resolver(i), reject);\n      else\n        results[i] = promise;\n    }\n\n    if (!remaining)\n      resolve(results);\n  });\n};\n\nPromise.race = function(promises){\n  var Class = this;\n\n  if (!isArray(promises))\n    throw new TypeError('You must pass an array to Promise.race().');\n\n  return new Class(function(resolve, reject) {\n    for (var i = 0, promise; i < promises.length; i++)\n    {\n      promise = promises[i];\n\n      if (promise && typeof promise.then === 'function')\n        promise.then(resolve, reject);\n      else\n        resolve(promise);\n    }\n  });\n};\n\nPromise.resolve = function(value){\n  var Class = this;\n\n  if (value && typeof value === 'object' && value.constructor === Class)\n    return value;\n\n  return new Class(function(resolve){\n    resolve(value);\n  });\n};\n\nPromise.reject = function(reason){\n  var Class = this;\n\n  return new Class(function(resolve, reject){\n    reject(reason);\n  });\n};\n\n})(typeof window != 'undefined' ? window : typeof global != 'undefined' ? global : typeof self != 'undefined' ? self : this);\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/es6-promise-polyfill/promise.js\n ** module id = 4\n ** module chunks = 0\n **/","var nextTick = require('process/browser.js').nextTick;\nvar apply = Function.prototype.apply;\nvar slice = Array.prototype.slice;\nvar immediateIds = {};\nvar nextImmediateId = 0;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) { timeout.close(); };\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(window, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// That's not how node.js implements it but the exposed api is the same.\nexports.setImmediate = typeof setImmediate === \"function\" ? setImmediate : function(fn) {\n  var id = nextImmediateId++;\n  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n\n  immediateIds[id] = true;\n\n  nextTick(function onNextTick() {\n    if (immediateIds[id]) {\n      // fn.call() is faster so we optimize for the common use-case\n      // @see http://jsperf.com/call-apply-segu\n      if (args) {\n        fn.apply(null, args);\n      } else {\n        fn.call(null);\n      }\n      // Prevent ids from leaking\n      exports.clearImmediate(id);\n    }\n  });\n\n  return id;\n};\n\nexports.clearImmediate = typeof clearImmediate === \"function\" ? clearImmediate : function(id) {\n  delete immediateIds[id];\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/~/node-libs-browser/~/timers-browserify/main.js\n ** module id = 5\n ** module chunks = 0\n **/","// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = setTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    clearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/~/node-libs-browser/~/process/browser.js\n ** module id = 6\n ** module chunks = 0\n **/","'use strict';\n\nvar $ = require('jquery');\n\nvar Analytics = function() {\n\n  var analyticsUrl = '/analytics/add';\n\n  // Default buffer size for\n  var queueCapacity = 20;\n\n  // Queue of metrics for consolidation and minimizing outgoing PUT request.\n  var queue = [];\n\n  // Whether or not we should send computed metrics to the analytics service backend.\n  var serverUploadEnabled = true;\n\n  // Controls whether or not to send computed metrics up to\n  // the backend. Defaults to enabled.\n  this.setServerUploadEnabled = function(isEnabled) {\n    serverUploadEnabled = isEnabled;\n  };\n\n  /**\n   * Set the size of the metrics buffer.\n   *\n   * @param size Desired size of the metrics buffer.\n   */\n  this.setMetricsQueueCapacity = function(size) {\n    if (size > 0) {\n      queueCapacity = size;\n    }\n  };\n\n  /**\n   * Posts an analytics metric to the analytics endpoint\n   * Analytics endpoint performs checking to determine if it is a valid metric.\n   *\n   * @param {string} entityName\n   * @param {string} metricName\n   * @param {string} metricValue\n   */\n  this.sendMetric = function(entityName, metricName, metricValue) {\n    queue.push({entity: entityName, metric: metricName, increment: metricValue});\n    if (queue.length >= queueCapacity) {\n      this.flushMetrics();\n    }\n  };\n\n  /**\n   * Sends any queued metrics\n   */\n  this.flushMetrics = function() {\n    var analyticsPayload;\n\n    if (serverUploadEnabled) {\n      if (queue.length === 0) {\n        return;\n      }\n      // create the batched payload and reset the queue\n      analyticsPayload = JSON.stringify({'metrics': queue});\n      queue = [];\n\n      $.ajax({\n        url: analyticsUrl,\n        type: 'post',\n        contentType: 'application/text',\n        headers: {\n          'X-Socrata-Auth': 'unauthenticated'\n        },\n        data: analyticsPayload,\n        dataType: 'json'\n      });\n    }\n  };\n\n  // We want to flush metrics on unload in case we've queued up some metrics and haven't explicitly flushed.\n  window.onbeforeunload = this.flushMetrics;\n};\n\nmodule.exports = Analytics;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/Analytics.js\n ** module id = 7\n ** module chunks = 0\n **/"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACtCA;AACA;AACA;AACA;AACA;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;AC1eA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AC3VA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AC5EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC1FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;","sourceRoot":""}