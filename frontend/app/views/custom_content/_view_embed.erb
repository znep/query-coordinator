<%- allow_once do -%>
  <%- content_for :head do -%>
    <%= rendered_stylesheet_tag 'embed-form' %>
  <%- end -%>

  <%- content_for :translations do -%>
    <%= render_translations LocalePart.controls.embed %>
  <%- end -%>
<%- end -%>

<div id="<%= widget.elem_id %>" class="viewEmbed clearfix">
  <%= render :partial => 'datasets/embed_form',
             :locals => { :view => widget.view, :cur => 'root',
                          :customization_id => CurrentDomain.default_widget_customization_id } %>
</div>

<%- content_for :js_footer do -%>
  <%- allow_once do -%>
  <%= include_webpack_bundle 'open-data/embed-form.js' %>
  <%- end -%>
  <script type="text/javascript">
    // activator for <%= widget.elem_id %>

    $(function()
    {
      var selector = '#<%= widget.elem_id %>';
      var $form = $(selector).find('.embedForm');
      $form.find('select').uniform();
      $form.embedForm();
    });
  </script>
<%- end -%>
