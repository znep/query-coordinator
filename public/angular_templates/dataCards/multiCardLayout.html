<div
  ng-if="editMode"
  ng-repeat="cardGroup in cardGroups"
  card-group-index="$index"
  ng-style="cardGroup.hint"
  class="card-group-customize-hint">
  <div class="card-group-customize-hint-text">{{'cardLayout.cardGroupCustomizeHintText' | I18n:$index + 2}} <span class="icon-help">?</span></div>

  <div ng-show="{{$index === 0}}" class="card-group-customize-hint-cards row">
    <span class="card-group-customize-hint-card span6">
      <span class="card-group-customize-hint-card-inner"></span>
    </span>
    <span class="card-group-customize-hint-card span6">
      <span class="card-group-customize-hint-card-inner"></span>
    </span>
  </div>

  <div ng-show="{{$index === 1}}" class="card-group-customize-hint-cards row">
    <span class="card-group-customize-hint-card span4">
      <span class="card-group-customize-hint-card-inner"></span>
    </span>
    <span class="card-group-customize-hint-card span4">
      <span class="card-group-customize-hint-card-inner"></span>
    </span>
    <span class="card-group-customize-hint-card span4">
      <span class="card-group-customize-hint-card-inner"></span>
    </span>
  </div>

  <div ng-show="{{$index === 2}}" class="card-group-customize-hint-cards row">
    <span class="card-group-customize-hint-card span3">
      <span class="card-group-customize-hint-card-inner"></span>
    </span>
    <span class="card-group-customize-hint-card span3">
      <span class="card-group-customize-hint-card-inner"></span>
    </span>
    <span class="card-group-customize-hint-card span3">
      <span class="card-group-customize-hint-card-inner"></span>
    </span>
    <span class="card-group-customize-hint-card span3">
      <span class="card-group-customize-hint-card-inner"></span>
    </span>
  </div>
</div>

<div
  ng-repeat="cardGroup in cardGroups"
  ng-style="cardGroup.style"
  class="card-group">
</div>

<div
  class="card-spot"
  animate-to="cardState.style"
  animate-to-index="{{ cardState.index }}"
  ng-repeat="cardState in cardStates track by cardState.model.uniqueId">
  <card
    model="cardState.model"
    class="card"
    data-card-type="{{cardState.model.getCurrentValue('cardType')}}"
    where-clause="globalWhereClauseFragment"
    edit-mode="editMode"
    interactive="true"
    card-draggable="true"
    chooser-mode="chooserMode"
    is-grabbed="isGrabbedCard(cardState.model)"
    is-standalone-visualization="page.isStandaloneVisualization"
    ng-class="{
      expanded: cardState.model.getCurrentValue('expanded'),
      dragged: cardState.model === grabbedCard.model
    }"></card>
  <div
    class="card-drop-placeholder"
    ng-if="cardState.model === grabbedCard.model && cardState.model.fieldName !== '*'"></div>
</div>

<div
  ng-if="editMode"
  ng-repeat="dropTarget in dropTargets"
  ng-style="dropTarget.style"
  class="card-group-drop-placeholder"
  data-group-id="{{ dropTarget.cardSize}}">
    <img class="drag-card-icon" src="/images/dataCards/drag-card-icon.png">
    {{::'cardLayout.cardGroupPlaceholderText' | I18n}}

  <button
    ng-style="addCardButtons[$index].style"
    type="button"
    class="add-card-button action-btn dark r-to-l"
    ng-show="editMode"
    ng-click="addCardWithSize(addCardButtons[$index].cardSize)">
      <span class="icon-add"></span> {{::'cardLayout.addCardHere' | I18n}}
  </button>
</div>
