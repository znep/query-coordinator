@import dataCards/ellipsis

$fgColor: #333
$bgColor: #4a525a

body
  background: $bgColor
  color: white
  font-family: Arial, Helvetica, sans-serif
  margin: 0

p
  margin: 0.5em 0 0.5em 0
h1
  margin: 0
  font-size: 1.5em

a
  color: white
  &:visited
    color: #ccc

$quickFilterBarHeight: 40px
$cardBorder: 2px
$pageNameLineHeight: 1.5rem
$pageNameMaxLineCount: 2
.cards-view
  .pageName
    position: absolute
    top: 0
    @include multiline-with-ellipsis($pageNameMaxLineCount, $pageNameLineHeight, $bgColor)
  // The multiline-with-ellipsis mixin requires a fixed height on the content regardless
  // of whether or not the content is wrapping. So, we take the ellipsified content out
  // of layout and instead use this pageNameMeasuringStick to reserve the right amount
  // of space.
  .pageNameMeasuringStick
    visibility: hidden
    line-height: $pageNameLineHeight
    max-height: $pageNameLineHeight * $pageNameMaxLineCount

  .hideableMetadata
    margin: 15px
  .quickFilterBar
    color: white
    // Reserves space even if we're stuck.
    height: $quickFilterBarHeight
    margin: 0
    .content
      @include prefixer(box-sizing, border-box)
      height: $quickFilterBarHeight
      padding: 13px 0 0 15px
      background: #444
    &.stuck .content
      z-index: 1
      position: fixed
      top: 0
      right: 0
      left: 0

  .card
    @include prefixer(box-sizing, border-box)
    border: $cardBorder solid #bbb

  .collapsedLayout
    .cardSize1
      height: 300px + $cardBorder * 2
    .cardSize2
      height: 250px + $cardBorder * 2
    .cardSize3
      height: 200px + $cardBorder * 2

  .expandedLayout
    .expandedCards
      // top is set in JS
      position: fixed
      top: 0
      left: 35%
      right: 0
      bottom: 2px
      .card
        //NOTE: This currently only supports one expanded card. This is acceptable for the MVP.
        position: absolute
        top: 0
        right: 0
        bottom: 0
        left: 0
    .collapsedCards
      width: 35%
      .cardSize1
        height: 250px + $cardBorder * 2
      .cardSize2
        height: 200px + $cardBorder * 2
      .cardSize3
        height: 150px + $cardBorder * 2

$card-bg-color: #eee
$card-padding: 15px
$card-title-expanded-bg-color: #aaa
$card-title-padding: 5px
$card-title-margin-right: 18px
$card-title-border-thickness: 1px
$card-title-line-height: 1.2em
$card-description-max-line-count: 2
$card-description-line-height: 1.3em
.card
  color: $fgColor
  background: $card-bg-color
  padding: $card-padding
  position: relative
  .expandButton
    font-family: "SSAir"
    position: absolute
    top: 5px
    right: 23px
    a
      cursor: pointer
      display: block
      width: 0
      position: relative
      color: #888
      &:hover
        color: #ccc
      &:before
        content: '⤢'
  .description
    position: relative
    .description-text
      position: absolute
      top: 0
      @include multiline-with-ellipsis($card-description-max-line-count, $card-description-line-height, $card-bg-color)
    .description-measuring-stick
      visibility: hidden
      line-height: $card-description-line-height
      max-height: $card-description-line-height * $card-description-max-line-count
  .title-one-line
    overflow: hidden
    text-overflow: ellipsis
    white-space: nowrap
    padding-right: $card-title-margin-right
    line-height: $card-title-line-height
  .title-expanded
    display: none
    position: absolute
    top: $card-padding - $card-title-padding - $card-title-border-thickness
    left: $card-padding - $card-title-padding - $card-title-border-thickness
    right: $card-padding - $card-title-padding - $card-title-border-thickness + $card-title-margin-right
    border: $card-title-border-thickness solid black
    padding: $card-title-padding
    line-height: $card-title-line-height
    text-overflow: ellipsis
    white-space: nowrap
    opacity: 0
    &:hover
      z-index: 1
      opacity: 1
    .title-expanded-first-line
      position: absolute
      overflow: hidden
      background: $card-title-expanded-bg-color
      height: $card-title-line-height
    .title-expanded-remainder
      overflow: hidden

.onRight .card
  .title-expanded
    display: block
    overflow: hidden
    background: $card-title-expanded-bg-color
    &:hover
      overflow: visible
      white-space: normal
      text-align: right
    .title-expanded-first-line
      text-align: left
      top: $card-title-padding
      left: $card-title-padding
      right: $card-title-padding

.onLeft .card
  .title-expanded
    display: block
    overflow: visible
    color: $card-title-expanded-bg-color
    border-color: transparent
    .title-expanded-first-line
      top: -$card-title-border-thickness
      left: -$card-title-border-thickness
      padding: $card-title-padding
      border: $card-title-border-thickness solid black
      color: $fgColor

.card.expanded
  .expandButton a
    &:before
      content: ''

$top-nav-height: 40px
$facets-list-width: 20%
$base-font-size: 1em
$small-font-size: $base-font-size * 0.5
$medium-font-size: $base-font-size * 0.75
$chart-tick-color: #ccc
$chart-description-color: darken($chart-tick-color, 30)
$unfiltered-bar-color: #C2C2C2
$filtered-bar-color: #676464
$neutral-bar-color: #676464
$tick-height: 1rem

.facets-view
  ul
    position: absolute
    top: $top-nav-height
    bottom: 10px
    left: 0
    width: $facets-list-width
    li
      height: 20%

  .main-viz
    position: absolute
    top: $top-nav-height
    right: 10px
    bottom: 10px
    left: $facets-list-width
    background: #555

div.column-chart
  overflow-x: hidden

  div.column-chart-wrapper
    position: relative

    div.truncation-marker
      position: absolute
      right: 0
      top: 50%
      height: 100%
      width: 1em
      border: 1px solid #aaa
      text-align: center
      display: none
      background-color: #aaa
      color: #eee
      z-index: 1

    div.field-name
      color: $chart-description-color

    div.field-description
      color: $chart-description-color

    &.s508
      position: static
      opacity: 0

    .bar
      position: absolute
      &.unfiltered
        background-color: $unfiltered-bar-color
      &.filtered, &.neutral
        background-color: $filtered-bar-color
      &.tertiary
        background-color: rgba(0, 0, 0, 0)
        &:hover
          background-color: rgba(50, 50, 50, 0.5)

      div.tooltip
        display: none
        position: absolute
        width: 110px
        height: 20px // 30 including pointer
        padding: 10px
        background-color: #0d3349
        color: #eeeeff
        opacity: 0.8
        font-size: $small-font-size

      span.tip
        width: 0
        display: none
        border-left: 4px solid transparent
        border-right: 4px solid transparent
        border-top: 8px solid #0d3349
        top: 10px
        position: relative

      &:hover
        div.tooltip
          display: block
        span.tip
          display: block

  div.labels
    position: relative
    height: 55px
    div
      margin-top: 2px
      border-left: 1px solid $chart-tick-color
      border-bottom: 1px solid $chart-tick-color
      position: absolute
      width: 0.5rem
      text-indent: 0.5rem
      span
        color: $chart-tick-color
        position: absolute
        left: 0.25rem
        font-size: $medium-font-size
        line-height: $base-font-size
        white-space: nowrap

  div.ticks
    position: relative
    top: 70px
    div
      height: $tick-height
      border-bottom: 1px solid $chart-tick-color
      position: absolute
      width: 100%
      color: $chart-tick-color
      text-align: right
      margin-top: -$tick-height
