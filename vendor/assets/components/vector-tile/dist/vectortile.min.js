!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.VectorTile=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){"use strict";function c(a,b){for(this.layers={},this._buffer=a,b=b||a.length;a.pos<b;){var c=a.readVarint(),d=c>>3;if(3==d){var e=this.readLayer();e.length&&(this.layers[e.name]=e)}else a.skip(c)}}var d=a("./vectortilelayer");b.exports=c,c.prototype.readLayer=function(){var a=this._buffer,b=a.readVarint(),c=a.pos+b,e=new d(a,c);return a.pos=c,e},c.prototype.toGeoJSON=function(){for(var a={},b=Object.keys(this.layers),c=0;c<b.length;c++)a[b[c]]=this.layers[b[c]].toGeoJSON();return a}},{"./vectortilelayer":3}],2:[function(a,b){"use strict";function c(a,b,c,d,e){for(this.properties={},this.extent=c,this.type=0,this._buffer=a,this._geometry=-1,this._keys=d,b=b||a.length;a.pos<b;){var f=a.readVarint(),g=f>>3;if(1==g)this._id=a.readVarint();else if(2==g)for(var h=a.pos+a.readVarint();a.pos<h;){var i=d[a.readVarint()],j=e[a.readVarint()];this.properties[i]=j}else 3==g?this.type=a.readVarint():4==g?(this._geometry=a.pos,a.skip(f)):a.skip(f)}}var d=a("point-geometry");b.exports=c,c.types=["Unknown","Point","LineString","Polygon"],c.prototype.loadGeometry=function(){var a=this._buffer;a.pos=this._geometry;for(var b,c=a.readVarint(),e=a.pos+c,f=1,g=0,h=0,i=0,j=[];a.pos<e;){if(!g){var k=a.readVarint();f=7&k,g=k>>3}if(g--,1===f||2===f)h+=a.readSVarint(),i+=a.readSVarint(),1===f&&(b&&j.push(b),b=[]),b.push(new d(h,i));else{if(7!==f)throw new Error("unknown command "+f);b.push(b[0].clone())}}return b&&j.push(b),j},c.prototype.bbox=function(){var a=this._buffer;a.pos=this._geometry;for(var b=a.readVarint(),c=a.pos+b,d=1,e=0,f=0,g=0,h=1/0,i=-1/0,j=1/0,k=-1/0;a.pos<c;){if(!e){var l=a.readVarint();d=7&l,e=l>>3}if(e--,1===d||2===d)f+=a.readSVarint(),g+=a.readSVarint(),h>f&&(h=f),f>i&&(i=f),j>g&&(j=g),g>k&&(k=g);else if(7!==d)throw new Error("unknown command "+d)}return[h,j,i,k]},c.prototype.toGeoJSON=function(){for(var a={type:"Feature",geometry:{},properties:{}},b=0;b<this._keys.length;b++){var d=this._keys[b];a.properties[d]=this.properties[d]}a.geometry.coordinates=this.loadGeometry();for(var e=0;e<a.geometry.coordinates.length;e++)for(var f=a.geometry.coordinates[e],g=0;g<f.length;g++)f[g]=[f[g].x,f[g].y];return"Point"==c.types[this.type]?a.geometry.type="Point":"LineString"==c.types[this.type]?1==a.geometry.coordinates.length?(a.geometry.coordinates=a.geometry.coordinates[0],a.geometry.type="LineString"):a.geometry.type="MultiLineString":"Polygon"==c.types[this.type]&&(a.geometry.type="Polygon"),a}},{"point-geometry":4}],3:[function(a,b){"use strict";function c(a,b){this.version=1,this.name=null,this.extent=4096,this.length=0,this._buffer=a,this._keys=[],this._values=[],this._features=[];var c,d;for(b=b||a.length;a.pos<b;)c=a.readVarint(),d=c>>3,15===d?this.version=a.readVarint():1===d?this.name=a.readString():5===d?this.extent=a.readVarint():2===d?(this.length++,this._features.push(a.pos),a.skip(c)):3===d?this._keys.push(a.readString()):4===d?this._values.push(this.readFeatureValue()):a.skip(c)}var d=a("./vectortilefeature.js");b.exports=c,c.prototype.readFeatureValue=function(){for(var a,b,c=this._buffer,d=null,e=c.readVarint(),f=c.pos+e;c.pos<f;)if(a=c.readVarint(),b=a>>3,1==b)d=c.readString();else{if(2==b)throw new Error("read float");if(3==b)d=c.readDouble();else if(4==b)d=c.readVarint();else{if(5==b)throw new Error("read uint");6==b?d=c.readSVarint():7==b?d=Boolean(c.readVarint()):c.skip(a)}}return d},c.prototype.feature=function(a){if(0>a||a>=this._features.length)throw new Error("feature index out of bounds");this._buffer.pos=this._features[a];var b=this._buffer.readVarint()+this._buffer.pos;return new d(this._buffer,b,this.extent,this._keys,this._values)},c.prototype.toGeoJSON=function(){for(var a={type:"FeatureCollection",features:[]},b=0;b<this.length;b++)a.features.push(this.feature(b).toGeoJSON());return a}},{"./vectortilefeature.js":2}],4:[function(a,b){"use strict";function c(a,b){this.x=a,this.y=b}b.exports=c,c.prototype={clone:function(){return new c(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var b=a.x-this.x,c=a.y-this.y;return b*b+c*c},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,b){return Math.atan2(this.x*b-this.y*a,this.x*a+this.y*b)},_matMult:function(a){var b=a[0]*this.x+a[1]*this.y,c=a[2]*this.x+a[3]*this.y;return this.x=b,this.y=c,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var b=Math.cos(a),c=Math.sin(a),d=b*this.x-c*this.y,e=c*this.x+b*this.y;return this.x=d,this.y=e,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},c.convert=function(a){return a instanceof c?a:Array.isArray(a)?new c(a[0],a[1]):a}},{}]},{},[1])(1)});