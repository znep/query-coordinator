<%= menu_tag({'id' => 'filterViewMenu', 'items' => [
{'text' => 'Filter...', 'class' => 'filter', 'href' => blist_filters_path(@view.id), 'modal' => true},
{'text' => 'Sort Columns...', 'class' => 'sort', 'href' => blist_sort_bys_path(@view.id), 'modal' => true},
{'text' => 'Show or Hide Columns', 'class' => 'showHide', 'href' => '#',
  'submenu' => columns_menu(@view,
      {'id' => 'columnsShowMenu',
        'initial_items' => [{'section_title' => 'Check/Uncheck to Show/Hide'},
          {'separator' => true}],
          'post_items' => (current_user && @view.owner.id == current_user.id) ?
          [{'separator' => true},
          {'text' => 'Advanced...', 'class' => 'advancedShowHide',
            'href' => blist_show_hides_path(@view.id), 'modal' => true}] : [],
        'href_prefix' => "#hide-show-col_",
        'checkbox_menu' => true,
        'checkbox_callback' => proc { |c| !c.flag?('hidden') },
        'column_test' => proc {|c, p| p.nil? || !p.flag?('hidden')},
        'include_options' =>
        {'nested_table' => true, 'hidden' => true,
          'nested_table_children' => true, 'list' => true}
          })
}]}) %>
