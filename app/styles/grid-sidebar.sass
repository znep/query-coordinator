@mixin sidebar-colors($c, $dark: false)
  .mainTitleBlock
    @include vertical-gradient($c)
  .headerLink
    @if $dark == true
      background-color: scale-color($c, $saturation: +90%, $lightness: +90%)
      border-color: scale-color($c, $saturation: +60%, $lightness: +70%)
    @else
      background-color: scale-color($c, $lightness: +70%)
      border-color: scale-color($c, $lightness: +20%)
    &.selected
      background-color: $c

.hideValidation
  display: none !important

#gridSidebar
  background-color: $color_chrome_sidebar_background
  border: 0 solid $color_chrome_box_border
  display: none
  overflow: hidden
  position: absolute
  top: 0
  width: 30em
  &.position-left
    border-right-width: 1px
  &.position-right
    border-left-width: 1px

  .close
    @include sprite-button-icons
    position: absolute
    right: 0.5em
    top: 0.7em
    z-index: 1
    .ie7 & .icon
      display: block

  .ui-resizable-w
    left: 0
    width: 4px

  .paneOverlay
    background-color: #cccccc
    height: 100%
    left: 0
    filter: alpha(opacity = 30)
    opacity: 0.3
    position: absolute
    top: 0
    width: 100%
    z-index: 60

  .loadingOverlay
    background-color: #eeeeee
    height: 100%
    left: 0
    filter: alpha(opacity = 70)
    opacity: 0.7
    position: absolute
    top: 0
    width: 100%
    z-index: 60

  .loadingSpinner
    top: 33%

  .loadingOverlay, .loadingSpinner
    display: none

  &.processing .loadingOverlay, &.processing .loadingSpinner
    display: block

  .outerPane
    // IE7 had a weird issue where the scrollbar from a hidden pane would still
    // show up on top of a visible pane, thereby disallowing the user from
    // scrolling the real pane.  Apparently position: relative fixes it
    @include sidebar-colors($sidebar_default_tab_color_top)
    .ie7 &
      position: relative
    .mainTitleBlock
      padding: 0.5em 1em

      .title
        color: #ffffff
        font-size: 1.3em
        text-transform: none

    .headerLink
      @include sprite-accordion-icons
      border: 1px solid
        left: 0
        right: 0
      color: #333333
      display: block
      font-size: 1.1em
      font-weight: bold
      margin-bottom: 0.25em
      padding: 0.5em 0.75em
      &.selected
        border: none
        color: #ffffff
        cursor: default
        margin-bottom: 0
      &.disabled
        color: #999999
        cursor: default
        .icon
          // IE7 hides the title if this is display: none
          visibility: hidden
      .ie7 &
        position: relative
      .icon
        float: right

    &#gridSidebar_outer_edit
      @include sidebar-colors($sidebar_edit_tab_color_top)

    &#gridSidebar_outer_moreViews
      @include sidebar-colors($sidebar_more_views_tab_color_top)

    &#gridSidebar_outer_filter
      @include sidebar-colors($sidebar_filter_tab_color_top, true)

    &#gridSidebar_outer_visualize
      @include sidebar-colors($sidebar_visualize_tab_color_top, true)

    &#gridSidebar_outer_export
      @include sidebar-colors($sidebar_export_tab_color_top)

    &#gridSidebar_outer_feed
      @include sidebar-colors($sidebar_feed_tab_color_top)

    &#gridSidebar_outer_embed
      @include sidebar-colors($sidebar_embed_tab_color_top)

    &#gridSidebar_outer_about
      @include sidebar-colors($sidebar_about_tab_color_top)

    // publisher tabs
    &#gridSidebar_outer_metadata
      @include sidebar-colors($sidebar_metadata_tab_color_top)
    &#gridSidebar_outer_appearance
      @include sidebar-colors($sidebar_appearance_tab_color_top)
    &#gridSidebar_outer_behavior
      @include sidebar-colors($sidebar_behavior_tab_color_top)
    &#gridSidebar_outer_advanced
      @include sidebar-colors($sidebar_advanced_tab_color_top)

    // story customizer tabs
    &#gridSidebar_outer_textbox
      @include sidebar-colors($sidebar_textbox_tab_color_top)
    &#gridSidebar_outer_pager
      @include sidebar-colors($sidebar_pager_tab_color_top)
    &#gridSidebar_outer_other
      @include sidebar-colors($sidebar_other_tab_color_top)

    // special sidebars
    &#gridSidebar_outer_cellFeed
      @include sidebar-colors($cell_feed_color)

    .panes
      overflow: auto
      position: relative

  .sidebarPane
    @include disabled-overlay(8em)
    padding-top: 0.5em

    &.initialLoad .formSection
      filter: alpha(opacity = 30)
      opacity: 0.3

    .subtitleBlock
      padding: 1em

      .subtitle
        color: #666
        font-size: 1.3em

    .paneContent
      padding: 0.75em
      position: relative

    .formSection
      margin-bottom: 1em
      padding: 0

      > .uniform.checker, .sectionSelect
        display: none
        margin-right: 0.4em

        .ie7 &
          position: absolute
          + .formHeader
            left: 2.3em
            margin-left: 0
            position: relative

      &.selectable > .uniform.checker, &.selectable .sectionSelect
        display: inline-block

      .formHeader
        color: $color_chrome_sidebar_text
        display: inline-block
        font-size: 1.2em
        font-weight: bold
        margin-bottom: 0.3em
        margin-left: 0
        padding-left: 0
        &.hide
          display: none

      .ie7 &.selectable .formHeader
        margin:
          left: 1.2em
          top: 0.4em

      .sectionDisabledMessage, .sectionWarningMessage
        color: #333333
        display: none
        font-size: 1.3em
        font-style: italic
        font-weight: bold
        margin: 1em 0
        text-align: center

      &.warned
        .sectionWarningMessage
          display: block

      &.disabled
        .sectionDisabledMessage
          display: block
        .sectionContent
          display: none
        &.error .sectionDisabledMessage
          color: red

      .sectionContent
        background-color: #fff
        border: 1px solid $color_chrome_box_border
        @include border-radius(0.3em)
        margin-top: 0.3em
        padding: 1px
          bottom: 0.3em

      dl.sectionContent
        @include dl-section-content

      // custom content is wrappen in a formSectionInner,
         but shouldn't be styled that way.
      &.custom > .sectionContent
        background-color: transparent
        border: none
        margin: 0
        padding: 0

      .line
        margin: 0.5em 0
        position: relative

        label
          background-position: left 5px
          color: $color_chrome_sidebar_text
          font-size: 1.1em
          font-weight: bold
          left: 0.7em
          position: absolute
          top: 0.5em
          width: 6.7em

        .inputWrapper
          display: block
          float: none
          padding-left: 10.2em
          &.textWrapper
            padding-right: 1em

        textarea, input[type="text"]
          width: 100%

        .uniform.selector
          width: 100%
          select
            width: 100%

        input[type="radio"], .uniform.radio,
        input[type="checkbox"], .uniform.checker
          margin-right: 0.5em
          .ie7 &
            display: inline

        &.custom input[type="text"]
          width: 95%

        .blist-combo
          margin:
            left: -2px
            top: -3px
          width: 100%

        .uploader
          width: auto
          .filename
            float: none
            margin-right: 5em
            width: auto
            input
              @include box-shadow-none
              background-color: transparent
              border: none
              color: inherit
              font-size: 1em
              width: 100%
          .action
            right: 0
            position: absolute
            top: 0
            width: 5em

        span.error
          color: #ff0000
          display: block
          line-height: 1.7em
          margin-left: 9.1em
          padding-left: 12px

        .columnSelector
          @include text-hiding
          background-image: url(/stylesheets/images/controls/column_select_sprite.png)
          display: none
          height: 20px
          left: 10.1em
          position: absolute
          top: 0.5em
          width: 20px
          .table-renderType &
            display: block

          &.inProcess
            background-position: 0 -20px
            z-index: 70

        .table-renderType &.columnSelect .inputWrapper
          font-size: 1em
          padding-left: 12.2em

        &.color .colorControlLabel
          margin-left: 1em

        &.static > span
          font-size: 1.2em
          padding-top: 0.2em

        &.note > span
          font-size: 1.2em
          padding-top: 0.2em
          padding-left: 1.2em

        .ui-slider
          display: block
          margin:
            left: 0.5em
            right: 3em

        input.sliderInput
          background-color: transparent
          border: none
          @include box-shadow-none
          float: right
          margin-top: -0.2em
          text-align: right
          width: 1.8em

        &.colorCollapse
          position: absolute
          right: 0.2em
          margin-top: 0

          label
            display: none

        &.colorCollapse + div.line
          margin-right: 24px

        &.radioSelect
          padding-left: 0

          .radioSelectBlock
            .radioLine
              position: relative
              label
                font-weight: normal
                margin-right: 0
                padding-left: 0
                position: static
                text-transform: capitalize
                vertical-align: bottom
                width: auto

        &.radioGroup, &.group
          padding-left: 0.65em

        &.group
          padding-top: 0
          .inputBlock
            display: block
            float: none

        .radioBlock
          display: block
          float: none
          padding-left: 10.2em

          .radioLine
            position: relative
          .uniform.radio
            left: 0
            position: absolute
            top: 0

          label
            display: block
            font-size: 1.2em
            font-weight: normal
            margin:
              left: 2.2em
              right: 0
            padding-left: 0
            position: static
            vertical-align: bottom
            width: auto

            .inputWrapper
              padding-left: 0

            .uniform.selector
              font-size: 1em

            select, input
              font-size: 1em

            input.sliderInput
              width: 1.8em

          .columnSelect
            .table-renderType & .inputWrapper
              margin-left: 2em
            .columnSelector
              left: 2.2em
              top: 0
            .uniform.radio
              margin-bottom: 3px

          label span.error
            font-size: 0.8333em
            margin-left: 0
            padding-left: 0

        &.inputFirst
          margin: 0
          .inputWrapper
            float: left
            padding-left: 0
            .ie7 &
              display: inline
          label
            display: block
            float: none
            font-size: 1.2em
            font-weight: normal
            padding-left: 0
            position: static
            width: auto

        &.noLabel
          > label
            display: none
          .inputWrapper, .radioBlock
            padding-left: 0

        &.repeater
          .addValue
            @include sprite-repeater-icons
            margin-left: 1em
            &.hide
              display: none
            .icon
              float: left
              margin-right: 0.4em

          .line
            display: block
            float: none
            margin: 0
            position: relative

            &.colorCollapse
              position: absolute

            .removeLink
              @include sprite-repeater-icons
              left: 0.1em
              line-height: 1em
              padding: 0.3em
              position: absolute
              top: 0.1em
              z-index: 1

            &.group .removeLink
              left: 0.1em
              top: 0.5em

          > .line
            border: 1px dashed transparent
            padding: 0.1em 0 0.3em 0.3em
            &:hover
              border-color: $color_chrome_box_border

            &.color:hover
              border-color: transparent

        &.group .removeLink
          left: 0.75em

        &.colorArray
          .line.color
            clear: none
            float: left
            margin: 0 1px
            padding: 0
            position: static
            & + .line.color .inputWrapper
              padding-left: 0

      &.collapsed
        .formHeader
          color: #999999

        .sectionContent
          display: none

    .fullButton
      background-color: #fff
      border: 1px solid $color_chrome_box_border
      @include border-radius(0.3em)
      display: block
      font-size: 1.3em
      font-weight: bold
      margin-top: 1em
      padding: 0.6em 1em
      text-align: center

    .finishButtons
      margin-top: 0

      // Once the old app is gone, all these legacy actionButtons styles can go away
      li
        float: left
        .noCss3 &
          padding-left: 10px

// sidebar button styles
#sidebarOptions
  background-image: url(/stylesheets/images/interface/dataset_sidebar_fade.png)
  background-image: -moz-linear-gradient(0 0 270deg, rgba(255, 255, 255, 1), rgba(255, 255, 255, 0.7)), -moz-linear-gradient(0 0 0deg, rgba(255, 255, 255, 1), rgba(255, 255, 255, 0))
  background-image: -webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 1)), to(rgba(255, 255, 255, 0.7))), -webkit-gradient(linear, left top, right top, from(rgba(255, 255, 255, 1)), to(rgba(255, 255, 255, 0)))
  background-repeat: no-repeat
  float: right
  padding: 0.2em 0.6em 0.4em 10em

  li
    float: left
    margin-left: 0.6em
    position: relative

    a
      @include dataset-sidebar-icons
      @include border-radius(0.35em)
      color: #fff
      display: block
      font-size: 0.9em
      height: 13px
      line-height: 13px
      padding: 0.4em 0.7em 0.5em

      .icon
        display: inline-block
        margin-right: 0.4em
        vertical-align: bottom
        @include ie7-inline-block

      .ie7 & .icon
        float: left

    &.active
      margin: -2px
        left: 0.4em
      a
        border: 2px solid #fff
        // Chrome can't handle the larger border
        border-radius: 0.1em

.position-left
  #sidebarOptions
    background-image: url(/stylesheets/images/interface/dataset_sidebar_fade_left.png?1)
    background-image: -moz-linear-gradient(0 0 270deg, rgba(255, 255, 255, 1), rgba(255, 255, 255, 0.7)), -moz-linear-gradient(right 0 180deg, rgba(255, 255, 255, 1), rgba(255, 255, 255, 0))
    background-image: -webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 1)), to(rgba(255, 255, 255, 0.7))), -webkit-gradient(linear, right top, left top, from(rgba(255, 255, 255, 1)), to(rgba(255, 255, 255, 0)))
    background-position: right top
    float: left
    padding:
      left: 0.6em
      right: 10em
    li
      margin:
        left: 0
        right: 0.6em
