<script>
window.socrata = window.socrata || {};
window.socrata.storyteller = window.socrata.storyteller || {};

window.socrata.storyteller.config = (function () {

  var airbrakeConfigHash = <%= airbrake_config_for_js.to_json.html_safe %>;

  return {
    autosaveDebounceTimeInSeconds: 2,
    coreServiceAppToken: '<%= Rails.application.config.core_service_app_token %>',
    fileUploader: {
      checkDocumentProcessedRetryInterval: 1000,
      checkDocumentProcessedMaxRetrySeconds: 30,
      maxFileSizeBytes: 5 * 1024 * 1024  // 5 MB
    },
    environment: '<%= Rails.env %>',
    getAirbrakeConfig: function (key) {
      return airbrakeConfigHash[_.camelCase(key)];
    },
    embedCodeSandboxIFrameAllowances: '<%= embed_code_iframe_sandbox_allowances %>'
  }
})();

</script>
