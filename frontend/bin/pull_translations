#!/bin/bash

# Import our english strings to LocaleApp
# Pulls api key from:
# - LOCALEAPP_API_KEY env var
# - .env
# - .localeapp/config.rb

if [ -z $LOCALEAPP_API_KEY ]; then
  echo 'You must first set the LOCALEAPP_API_KEY environment variable.'
  exit 1
fi

if [ -z $COMMON_LOCALEAPP_API_KEY ]; then
  echo 'You must first set the COMMON_LOCALEAPP_API_KEY environment variable.'
  exit 1
fi

mkdir -p log
touch log/localeapp.yml

set -e

## Pull platform-ui/frontend locales
LOCALEAPP_API_KEY=$LOCALEAPP_API_KEY localeapp pull

## Pull platform-ui/common locales
cd ../common/i18n/
mkdir -p log
touch log/localeapp.yml
LOCALEAPP_API_KEY=$COMMON_LOCALEAPP_API_KEY localeapp pull
