<%-
  contact = contact_row

  contact_group_heading = @group_heading
  contact_group_heading = (contact.name || contact.displayName).slice(0, 1).upcase
-%>

<%- if (contact_group_heading.nil? || (contact_group_heading != @group_heading))
      @group_heading = contact_group_heading
-%>
  <tr class="sortGroup">
    <td colspan="7"><div><%= contact_group_heading %></div></td>
  </tr>
<%- end -%>

<tr id='<%= contact.is_a?(Group) ? 'group' : 'friend' %>:<%= contact.id %>'
  class='item'>
  <td class='handle first'><div>
      <%-# <a href="#open_menu" class="dropdownLink menuHandle">Friend Menu</a> -%>
      <%#- if (contact.is_a?(Group)) -%>
        <%#= menu_tag({'id' => "itemMenu-#{contact.id}", 'class' => 'blistItemMenu',
          'items' => [
            {'text' => 'Rename', 'class' => 'rename renameLink', 'href' => contact_url(contact.id)},
            { 'text' => 'Remove', 'class' => 'delete', 'href' => '#remove' }
          ]
        }) %>
      <%#- else -%>
        <%#= menu_tag({'id' => "itemMenu-#{contact.id}", 'class' => 'blistItemMenu',
          'items' => [
            { 'text' => 'Remove', 'class' => 'delete', 'href' => '#remove' }
          ]
        }) %>
      <%#- end -%>
  </div></td>
  <td class='picture'>
    <%- if contact.is_a?(Group) -%>
    <div class='group'><a href='#'><%= h(contact.name) %></a></div>
    <%- else -%>
    <a href='#'>
      <img src="<%= contact.profile_image_path("small") %>" width="24" height="24"
      alt="<%= h(contact.displayName) %>" />
    </a>
    <%- end -%>
  </td>
  <td class='name'>
    <div class='clipText'>
      <a href='#'><%= h(contact.name || contact.displayName) %></a>
    </div>
  </td>
  <td class='tags'><div class='clipText'>
      <%= h(contact.tag_display_string) %>
  </div></td>
  <td class='activityDate last'><div>
      <%= blist_date(contact.lastLogin || contact.updatedAt) %>
  </div></td>
</tr>
