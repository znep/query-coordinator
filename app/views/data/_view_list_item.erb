<% cache ["discover-view-list-item", view_list_item.id, CurrentDomain.cname ], :expires_in => 15.minutes do %>
<%- view = view_list_item -%>

<li class="viewListItem clearfix">

  <div class="itemHeader clearfix">
    <div class="itemTitle">
      <div class="itemTitleInner clearfix">
        <div class="itemTitleWrapper">
          <h3 class="<%= get_permissions_icon_class_for_view(view) %> clipText">
            <%= link_to(h(view.name), view.href(port), :title => h(view.name),
              #_domain temporarily for debug, prod will not see attrib at all
              :_domain => Rails.env.staging? ? CurrentDomain.cname + '-' + view.domainCName : nil,
              :rel => view.browserOpenTarget) %>
          </h3>
        </div>
        <p class="dateLine"><%= blist_date(view.last_activity) %></p>
      </div>
    </div>
    <ul class="itemMeta clearfix">
      <% if module_enabled?(:allow_comments) %>
        <li class="ratingContainer"><strong><%= get_blist_rating_html(view) %> <%= pluralize(view.totalTimesRated, "Rating") %></strong></li>
      <% end %>

      <li>Visits <strong><%= view.viewCount %></strong></li>

      <% if module_enabled?(:allow_comments) %>
        <li class="last">Comments <strong><%= view.numberOfComments %></strong></li>
      <% end %>
    </ul>
  </div>

  <div class="itemBody">
    <div class="itemContent">
      <%- unless (view.category == "") -%>
        <p class="viewCategory"><%= view.category.nil? ? '' : view.category.capitalize %></p>
      <%- end -%>
      <%- unless (view.description.nil? || view.description.length == 0 ) -%>
        <p class="viewDescription clipText"><%= view.description %></p>
      <%- end -%>
      <%- if (view.tags && view.tags.length > 0) -%>
        <p class="viewTags"><span>Tags: </span><%= view.tag_display_string %></p>
      <%- end -%>
    </div>
    <div class="itemActionContainer">
      <ul class="itemActions actionButtons clearfix">
        <li><%= link_to("<span>About</span>", "#{view.href(port)}/about",
                :rel => view.browserOpenTarget) %>
        </li>
        <li><%= link_to("<span>Open</span>", view.href(port),
                :class => "arrowButton", :rel => view.browserOpenTarget) %>
        </li>
      </ul>
    </div>
  </div>
</li>
<% end %>
