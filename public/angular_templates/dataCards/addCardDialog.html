<h2>Add a card</h2>
<div class="add-card-select-column">
  <soc-select ng-model="addCardSelectedColumnFieldName">
    <soc-option
      value="null"
      disabled="disabled"
      ng-selected="addCardSelectedColumnFieldName === null">Choose a column...</soc-option>

    <soc-option value="null" disabled="disabled" ng-if="datasetColumns.available.length > 0"></soc-option>

    <soc-option
      value="{{fieldName}}"
      title="Add this card"      
      ng-repeat="fieldName in datasetColumns.available">{{columnHumanNameFn(fieldName)}}</soc-option>

    <soc-option value="null" disabled="disabled" ng-if="datasetColumns.alreadyOnPage.length > 0"></soc-option>

    <soc-option
      value="null"
      disabled="disabled"
      ng-if="datasetColumns.alreadyOnPage.length > 0"><b>Card already on page</b></soc-option>

    <soc-option
      value="{{fieldName}}"
      title="This card is already on the page"
      disabled="disabled"
      ng-repeat="fieldName in datasetColumns.alreadyOnPage">-{{columnHumanNameFn(fieldName)}}</soc-option>

    <soc-option value="null" disabled="disabled" ng-if="datasetColumns.visualizationUnsupported.length > 0"></soc-option>

    <soc-option
      value="null"
      disabled="disabled"
      ng-if="datasetColumns.visualizationUnsupported.length > 0">Not currently supported</soc-option>

    <soc-option
      value="{{fieldName}}"
      title="This card type is currently unsupported"
      disabled="disabled"
      ng-repeat="fieldName in datasetColumns.visualizationUnsupported">-{{columnHumanNameFn(fieldName)}}</soc-option>

  </soc-select>
</div>
<div class="add-card-options">
  <ul class="cf" ng-show="availableCardTypes.length > 1">
    <li ng-show="availableCardTypes.indexOf('timeline') > -1">
      <button
        class="add-card-type-option icon-line-chart"
        ng-class="{ selected: addCardModel.getCurrentValue('cardType') === 'timeline' }"
        ng-click="setCardType('timeline')"
        data-visualization-name="Timeline Chart"></button>
      <span>Timeline Chart</span>
    </li>
    <li ng-show="availableCardTypes.indexOf('search') > -1">
      <button
      class="add-card-type-option icon-search"
      ng-class="{ selected: addCardModel.getCurrentValue('cardType') === 'search' }"
      ng-click="setCardType('search')"
      data-visualization-name="Search Card"></button>
      <span>Search Card</span>
    </li>
    <li ng-show="availableCardTypes.indexOf('feature') > -1">
      <button
        class="add-card-type-option icon-map"
        ng-class="{ selected: addCardModel.getCurrentValue('cardType') === 'feature' }"
        ng-click="setCardType('feature')"
        data-visualization-name="Feature Map"></button>
      <span>Feature Map</span>
    </li>
    <li ng-show="availableCardTypes.indexOf('column') > -1">
      <button
        class="add-card-type-option icon-bar-chart"
        ng-class="{ selected: addCardModel.getCurrentValue('cardType') === 'column', warn: showCardinalityWarning }"
        ng-click="setCardType('column')"
        data-visualization-name="Column Chart">
          <span class="warning-icon icon-warning"></span>
        </button>
      <span>Column Chart</span>
    </li>
    <li ng-show="availableCardTypes.indexOf('histogram') > -1">
      <button
        class="add-card-type-option icon-warning"
        ng-class="{ selected: addCardModel.getCurrentValue('cardType') === 'histogram' }"
        ng-click="setCardType('histogram')"
        data-visualization-name="Histogram">
        </button>
      <span>Histogram</span>
    </li>
    <li ng-show="availableCardTypes.indexOf('choropleth') > -1">
      <button
        class="add-card-type-option icon-region"
        ng-class="{ selected: addCardModel.getCurrentValue('cardType') === 'choropleth' }"
        ng-click="setCardType('choropleth')"
        data-visualization-name="Choropleth"></button>
      <span>Choropleth</span>
    </li>
  </ul>
</div>
<div class="add-card-preview">
  <span ng-if="addCardModel === null">Choose a column from the dropdown above to add a new card</span>
  <div class="card-spot" ng-if="addCardModel !== null">
    <card model="addCardModel"
      interactive="false"
      class="card preview">
    </card>
    <div class="add-card-controls">
      <div class="card-control add-card-settings icon-settings"
        title="Customize this card"
        ng-if="isCustomizable"
        ng-click="onCustomizeCard(addCardModel)">
        Settings
      </div>
    </div>
  </div>
</div>
<div class="add-card-buttons">
  <button type="button"
    class="action-btn dark r-to-l"
    ng-click="dialogState.show = false">Cancel</button>
  <button type="button"
    class="action-btn dark r-to-l"
    ng-class="{disabled: addCardModel === null}"
    ng-click="addCard()">Add card</button>
</div>
