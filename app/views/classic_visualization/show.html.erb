<html>
  <head>
    <%= rendered_stylesheet_tag 'base' %>
    <%= jquery_include %>
    <%= rendered_stylesheet_tag 'dataset-show' %>
    <%= rendered_stylesheet_tag 'dataset-bare' %> <!-- TODO make own package? -->
    <%= rendered_stylesheet_tag 'screen-classic-visualization' %>
  </head>
  <body data-locale="<%= I18n.locale %>" data-defaultlocale="<%= CurrentDomain.default_locale %>">
    <div class="outerContainer">
      <div id="renderTypeContainer">
        <div class="staticRenderType fullHeight renderTypeNode hide">
        </div>
      </div>
    </div>

    <%= render_translations %>

    <%= include_javascripts 'base' %>

    <%= render_view_js %>

    <script type="text/javascript">
      blist.feature_flags = <%= raw json_escape(FeatureFlags.derive(@view, request).to_json) %>;

      blist.namespace.fetch('blist.snapshot');
      blist.namespace.fetch('blist.configuration');

      blist.configuration.newChartsEnabled = <%= module_enabled?(:new_charts) || true %>;
      blist.configuration.newMapsEnabled = <%= module_enabled?(:new_maps) == true %>;
      blist.configuration.oldChartsForced = <%= module_enabled?(:old_charts) == true %>;

      <%= raw render_inline_setup_js('renderTypeContainer', self) %>
    </script>

    <%= include_javascripts 'screen-classic-visualization' %>

  </body>
</html>
