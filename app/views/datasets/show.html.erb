<% content_for :head do %>
  <%= auto_discovery_link_tag(:rss, "/views/#{@view.id}/rows.rss") %>
  <%= raw @view.display.render_stylesheet_includes %>
  <%= rendered_stylesheet_tag 'dataset-page' %>

  <title><%= h(@view.name) %> | <%= CurrentDomain.strings.site_title %></title>
  <%= meta_tags :description => @meta_description, :keywords => @meta_keywords %>
  <link rel="canonical" href="<%= @view.href %>" />
<% end %>

<div id='datasetBar'>
  <a id='navMenu' class='menu' href='#Navigation'>Nav menu</a>
  <span id='datasetIcon' class='icon'></span>
  <span id='datasetName'><%= @view.name %></span>

  <div id='sidebarOptions' class='right'>
    <a href='#Feed'>Feed</a>
    <a href='#Filter'>Filter</a>
  </div>
  <div class='right'>
    <a id='searchLink' href='#Search'>Search</a>
    <a id='shareMenu' href='#Share' class='menu'>Share</a>
  </div>
</div>

<div class='outerContainer'>
  <div class='gridContainer'>
    <div id='mainGrid' class='fullHeight'>
      <%= raw @view.display.render_body(self) %>
      <%= render(:partial => @view.display.render_partial) %>
    </div>
  </div>
</div>

<% content_for :js_footer do %>
  <script type="text/javascript">
    <%= raw @view.display.render_inline_setup_js('data-grid', self) %>
  </script>

  <%= raw @view.display.render_javascript_includes(self) %>

  <%= javascript_include_merged 'screen-dataset' %>
<% end %>
