@import 'lib/variables';

/**
 * Settings panel
 */
#settings-panel-container {
  position: relative;
  z-index: $settings-panel-z-index;

  button {
    padding: 1rem;
  }

  .settings-panel {
    position: fixed;
    width: $settings-panel-width;
    height: 100%;
    left: -$settings-panel-width * 3/2;
    top: 0;
    padding: $settings-panel-padding-width / 2;
    color: $header-text-color;
    background-color: $header-bg-color;
    z-index: 2;
    overflow: auto;

    .close-side-panel-btn {
      position: absolute;
      width: 100%;
      left: 0;
      top: 0px;
      padding: 0.3em 0.8em;
      color: $settings-panel-close-font-color;
      line-height: $settings-panel-close-bar-height;
      text-align: left;
      text-decoration: none;
      background-color: $header-bg-color;
      box-sizing: border-box;
      border: none;
      cursor: pointer;

      &:focus,
      &:hover {
        background-color: rgba(255, 255, 255, 0.1);
        outline: none;
      }

      .close-panel-icon {
        float: right;
        line-height: $settings-panel-close-bar-height;
      }
    }

    hr {
      @include thin-hr();

      border-bottom: 1px solid $settings-panel-hr-color;
    }

    .settings-main-title {
      padding-top: $settings-panel-close-bar-height;
      line-height: 4rem;
      font-size: 2em;
      font-weight: lighter;
    }

    .settings-save-failure-message {
      font-size: 1.5rem;
      padding-bottom: 0.8rem;
      visibility: collapse;
      text-align: center;

      &.active {
        visibility: visible;
      }

      .settings-save-failure-message-details {
        font-size: 1.5rem;
      }
    }

    .settings-save-btn {
      width: 70%;
    }
  }

  &.active .settings-panel {
    box-shadow: $content-panel-box-shadow-size 0 $content-panel-box-shadow-size $content-panel-box-shadow-color;
  }

  #settings-panel-overlay {
    position: fixed;
    width: 100%;
    height: 100%;
    left: 0;
    top: 0;
    background-color: $modal-overlay-bg-color;
    opacity: 0;
    transition: opacity $transition-duration;
    pointer-events: none;
    z-index: $settings-panel-overlay-z-index;

    &.active {
      pointer-events: auto;
      opacity: 1;
    }
  }
}

.settings-panel-errors {
  border: solid 1px $settings-panel-errors-border-color;
  background-color: $settings-panel-errors-background-color;
  padding: .75rem;
  font-size: 1.25rem;
  color: $settings-panel-errors-color;
  font-weight: lighter;
}

.settings-panel-displaying,
.settings-panel-publishing {
  margin-top: 2rem;

  > h2 {
    font-weight: lighter;
    text-transform: uppercase;
    color: $settings-panel-light-gray-color;
  }

}

.settings-panel-displaying {
  textarea {
    resize: vertical;
  }
}

.settings-panel-publishing {
  > div {
    padding-top: 1rem;
    padding-left: 1rem;
  }
}

.settings-panel-story-visibility,
.settings-panel-story-status {
  box-sizing: border-box;
  padding: 1rem 0;

  &::after {
    content: '';
    display: table;
    clear: left;
  }

  > div {
    float: left;
    width: $settings-panel-publishing-label-width;

    & + div {
      width: 100% - $settings-panel-publishing-label-width;
    }
  }

  h2, h3 {
    font-weight: lighter;
  }

  h3 {
    margin-top: 0.25rem;
    color: $settings-panel-visibility-status-state-color;
  }

  button {
    width: 100%;
  }
}

.settings-panel-story-publishing-help-text {
  padding: 1rem 0;
  font-size: 1.15rem;
  color: $settings-panel-light-gray-color;
  line-height: 1.5rem;
}

/**
 * IE 10 is the first version to stop responding to conditional
 * comment includes in HTML, so we need to resort to doubly-vile
 * hackery in order to accommodate IE 10's lack of support for
 * `pointer-events: none;`.
 *
 * Note that these rules will be applied to ALL versions of IE
 * up to but excluding 'Edge', which has deprecated these vendor
 * properties.
 *
 * See: https://philipnewcomer.net/2014/04/target-internet-explorer-10-11-css/
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /* IE10+ CSS styles go here */

  #settings-panel-container {

    #settings-panel-overlay {
      visibility: hidden;

      &.active {
        visibility: visible;
      }
    }
  }
}
