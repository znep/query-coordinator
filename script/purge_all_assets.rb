#!/usr/bin/env ruby
require 'yaml'

# BEGIN MANUAL CONFIG
def cachebust_key_for_templates_and_styles
  # Sample return value for this method:
  #   'd5af6cf2e3c49ed01983750698679cace754f58b.236.1427229395'
  #
  # HOW TO GET:
  # 1) Load any user-facing page on any domain in the environment you care about.
  # 2) Open the debugger, refresh. Look at the fetched styles. You will see a query parameter tacked on
  #    to each style request.
  # 3) Copy/paste it here, minus the ?.
  raise 'Please configure a cachebust key for template and style assets (edit the script).'
  # 'fe060bb83c6b1823dcd288e14fa0220de9f92de9.180.1420484944'
end

def cachebust_keys_for_js
  # Sample: [ '1427229395', '1427229995' ]
  #
  # HOW TO GET:
  # 1) Load any user-facing data lens page on any domain in the environment you care about.
  # 2) Open the debugger, refresh. Look at the fetched JS assets. You will see a query parameter tacked on
  #    to each JS request. Note that there are 2 - one for all the minified JS assets, another for all
  #    the unminified assets.
  # 3) Copy/paste both here, minus the ?.
  raise 'Please configure a cachebust key for JS assets (edit the script).'
  # %w(1429030889 1429031236)
end

def ats_hosts
  # Sample: [ '10.92.1.6', '10.92.1.7' ]
  #
  # HOW TO GET:
  # 1) knife search node "role:load_balancer AND environment:<YOUR ENVIRONMENT HERE>" -a ipaddress
  # 2) Paste the IPs here, as an array of strings.
  raise 'Please configure ATS hosts (edit the script).'
  # %w(ats1 ats2 ats3 ats4)
end

def domains_and_aliases
  # Sample: [ 'opendata-demo.rc-socrata.com', 'dataspace-demo.rc-socrata.com' ]
  #
  # HOW TO GET:
  # 1) Find a metadb node:
  #    knife search node "role:*meta* AND environment:<YOUR ENVIRONMENT HERE>" -a ipaddress
  # 2) SSH in, run:
  #    sudo -u postgres
  # 3) Run (according to your environment):
  #    psql blist_prod -c "\copy (select concat(cname, aliases) from domains) to STDOUT (DELIMITER ' ')" | tr '\n,' ' '
  #    psql blist_azure_rc -c "\copy (select concat(cname, aliases) from domains) to STDOUT (DELIMITER ' ')" | tr '\n,' ' '
  #    (for example, DB_NAME is blist_azure_rc in RC)
  # 4) Paste the output below.
  raise 'Please configure domains to purge (edit the script).'
  # 'nikebetterworld.socrata.com kent.demo.socrata.com aspe-hhs.socrata.com cmap.socrata.com saxon.socrata.com deleted-recovery.socrata.com deleted-indy.socrata.com deleted-faa.socrata.com h-iofexaimui.socrata.com singapore.socrata.com  act.socrata.com sbr.demo.socrata.com anna.demo.socrata.com anna.demo.socrata.com  kibbles.socrata.com dataslate.demo.socrata.com deleted-noaa-habitat.socrata.com bitbucket.demo.socrata.com data.cityofchicago.org chicago.socrata.com  vancouverwa.demo.socrata.com deleted-socialsecurity.socrata.com maryland-staging.demo.socrata.com nih.socrata.com usda.socrata.com benchmarkstudy.socrata.com gsa.socrata.com nyt.socrata.com datastaff.demo.socrata.com data.seattle.gov brasilia-df.demo.socrata.com iranhumanrights.socrata.com data.sunlightlabs.com gettingpastgo.socrata.com gis-demo.socrata.com openfata.demo.socrata.com dontuse.ly data.oregon.gov opendata.socrata.com deleon.socrata.com data.cityofdeleon.org  ohioag.socrata.com wb.socrata.com www.opendata.go.ke kenya.socrata.com opendata.go.ke  data.govloop.com personaldemocracy.socrata.com notdata.oregon.gov mslnet.socrata.com deleted-nyc2.socrata.com fec.socrata.com data.wa.gov pdf.socrata.com weforum.socrata.com checkbooknyc.socrata.com oswer.socrata.com www.metrochicagodata.org metrochicagodata.socrata.com www.metrochicagodata.com  knoxnews.socrata.com fcc.socrata.com data.cityofboston.gov jonstat.demo.socrata.com healthdata.socrata.com info.samhsa.gov explore.data.gov datagov.socrata.com  icf.demo.socrata.com matthewvb.demo.socrata.com doi.socrata.com welcome.demo.socrata.com washingtonpost.socrata.com dot.demo.socrata.com dot.socrata.com  phila.socrata.com nara.socrata.com data.cms.gov data.cms.hhs.gov  anchorage.socrata.com data.ok.gov oklahoma.socrata.com  fedstats.socrata.com usaspending.socrata.com seattle-gis.socrata.com data.nola.gov nola.socrata.com  bootcampone.demo.socrata.com deleted-redmond.socrata.com deleted-minnesota.socrata.com deleted-arizona.socrata.com deleted-austin.socrata.com deleted-utah.socrata.com deleted-texas.socrata.com deleted-kos.socrata.com engineering.demo.socrata.com ethicsdata.socrata.com boostingcollegecompletion.socrata.com oregon-gis.socrata.com samhsa-demo.socrata.com whitehouse.socrata.com scripps.socrata.com datagov-ra.socrata.com kc-gis.socrata.com nyc-mmr.demo.socrata.com datagov-demo.socrata.com datagov-sbx.socrata.com bmgf.demo.socrata.com nasa-deleted.socrata.com deleted-noaa-nmfs.socrata.com deleted-noaa.socrata.com deleted-pg.socrata.com cities.socrata.com medicaid.demo.socrata.com vancouver.socrata.com data.colorado.gov colorado.socrata.com  cfpb.demo.socrata.com data.austintexas.gov h-ikocolaeph.socrata.com  athens.socrata.com joel.demo.socrata.com joel.demo.socrata.com  swe.demo.socrata.com data.undp.org un.socrata.com  hack4reno.socrata.com sells.demo.socrata.com sells.demo.socrata.com  erika.demo.socrata.com www.opendatanyc.com alberta.demo.socrata.com nyc-test.socrata.com bvp.demo.socrata.com qatar.demo.socrata.com data.mo.gov h-chakikoola.socrata.com  data.nfpa.org data.raleighnc.gov raleigh.socrata.com  usaid.socrata.com databox.worldbank.org wbdata.socrata.com  krasnodar.socrata.com malaga.demo.socrata.com dont_use.demo.socrata.com data.test.healthcare.gov datahealthcare-staging.demo.socrata.com  childcare.vancouver.socrata.com chriswhong.demo.socrata.com bethstat.demo.socrata.com epa-data.socrata.com data.epa.gov  bootcamptwo.demo.socrata.com openiowa.socrata.com data.montgomerycountymd.gov h-daehawahhu.socrata.com  basicgov.socrata.com data.consumerfinance.gov h-nooyazeijo.socrata.com  hackomaha.socrata.com soda.demo.socrata.com calgary.socrata.com healthdata.nj.gov t3st3nvironm3nt.demo.socrata.com  va-healthstat.demo.socrata.com itdashboard.socrata.com newcastle.demo.socrata.com ottawa.socrata.com canvas.socrata.com mondara.socrata.com atlas.socrata.com  lombardia.socrata.com h-aenaugeshi.socrata.com  oklahoma-staging.demo.socrata.com bts.demo.socrata.com data.timapforjustice.org timap.socrata.com  abt.socrata.com data.abtassociates.com  nciv.demo.socrata.com dakar.demo.socrata.com va.demo.socrata.com es-around-you.demo.socrata.com colombia.demo.socrata.com columbia.demo.socrata.com  reidsville.demo.socrata.com sochi2014.demo.socrata.com illinois-microsites.demo.socrata.com vb.demo.socrata.com vb.demo.socrata.com  property-explorer.demo.socrata.com clare.demo.socrata.com bexar.demo.socrata.com edmonton-delete-later.demo.socrata.com will.demo.socrata.com chris.demo.socrata.com marcus.demo.socrata.com aca.demo.socrata.com finances.worldbank.org wbfinances.socrata.com d2lfezhcek5bka.cloudfront.net  data.oaklandnet.com oakland.demo.socrata.com  lilia.demo.socrata.com data.baltimorecity.gov baltimore.socrata.com  codeoak.demo.socrata.com oecd.demo.socrata.com data.gates.org gates.demo.socrata.com  kevin.demo.socrata.com cities.demo.socrata.com cities-datagov.demo.socrata.com reading.demo.socrata.com foundry.demo.socrata.com data.kingcounty.gov www.datakc.com datakc.socrata.com kingcounty.socrata.com www.datakc.org  data.gta.gov.zw zimbabwe.demo.socrata.com  ny.demo.socrata.com opencheckbook.data.somervillema.gov somervillecheckbook.demo.socrata.com  data.energystar.gov energystar.demo.socrata.com  fda.demo.socrata.com fda.socrata.com  hsmptest.demo.socrata.com states.demo.socrata.com cbo.demo.socrata.com india.demo.socrata.com mcc.demo.socrata.com budgetapp.demo.socrata.com medicare-staging.demo.socrata.com phase2.demo.socrata.com edmonton.demo.socrata.com World\ Food\ Program data.slcgov.com data.somervillema.gov google.demo.socrata.com indiaspend.demo.socrata.com sandbox.demo.socrata.com sandbox.socrata.com  accenture.demo.socrata.com accenture.demo.socrata.com  strategicplanning-aspe.demo.socrata.com keving.demo.socrata.com keving.demo.socrata.com  chrism.demo.socrata.com chrism.demo.socrata.com  andrewc.demo.socrata.com andrewc.demo.socrata.com  jordan.demo.socrata.com jordan.demo.socrata.com  data.maryland.gov maryland.socrata.com goals.maryland.gov  lisa.demo.socrata.com data.taxpayer.net h-ohsohweite.socrata.com taxpayer.demo.socrata.com  adb.demo.socrata.com yourmoneynj.demo.socrata.com nj.demo.socrata.com bronx.lehman.cuny.edu lehman.demo.socrata.com  data.hawaii.gov cityofmadison demo.socrata.com ballstonbid-govstat.demo.socrata.com opencheckbook.demo.socrata.com checkbookexplorer.demo.socrata.com  joep.demo.socrata.com socratau.demo.socrata.com ftptest.demo.socrata.com meredith.demo.socrata.com states-datagov.demo.socrata.com counties-datagov.demo.socrata.com aspe-strategicplanning.demo.socrata.com aspe-strategicplanning-two.demo.socrata.com  shadac.demo.socrata.com lasvegasstat.demo.socrata.com DELETED-data.maryland.gov epacdx.demo.socrata.com\  epacdx.demo.socrata.com justf.demo.socrata.com melissap.demo.socrata.com melissap.socrata.com  splunk.demo.socrata.com nic.demo.socrata.com arizonacdp.demo.socrata.com socratau201.demo.socrata.com karinh.demo.socrata.com paloalto.opendata.junar.com palo-alto.demo.socrata.com  dcps.demo.socrata.com meredith-govstat.demo.socrata.com data.sfgov.org sf.socrata.com  newmaps.demo.socrata.com data.cityofmadison.com cityofmadison.demo.socrata.com  pnpm.socrata.com socrata.pnpm-support.org pnpm.demo.socrata.com h-vlbqhexiow.socrata.com  energy.demo.socrata.com demo.socrata.com healthmeasures.aspe.hhs.gov montreal.demo.socrata.com montreal.demo.socrata.com  data.weatherfordtx.gov weatherfordtx.demo.socrata.com  www.data.act.gov.au data.act.gov.au  data.wellingtonfl.gov data.honolulu.gov capita.demo.socrata.com data.kcmo.org www.data.kcmo.org  data2020.abtassociates.com ice.demo.socrata.com kash.demo.socrata.com kashb.demo.socrata.com pensionnyc.demo.socrata.com bjs.demo.socrata.com colorado-staging.demo.socrata.com sanjose.demo.socrata.com russiantreasury.demo.socrata.com russiantreasury.demo.socrata.com  atlanta.demo.socrata.com h-shiohiwooz.socrata.com  lasvegas.demo.socrata.com deleted-mcc-govstat.demo.socrata.com cdc.demo.socrata.com cdd.demo.socrata.com energystar-test.demo.socrata.com mitre.test-socrata.com mitretestdomain.demo.socrata.com foia.demo.socrata.com nmba.demo.socrata.com ikn.demo.socrata.com bootcampthree.demo.socrata.com dhh-louisiana.demo.socrata.com thi.demo.socrata.com turkey.demo.socrata.com louis.demo.socrata.com lombardia-govstat.demo.socrata.com nyc-open-data-staging.demo.socrata.com anytown.demo.socrata.com feeds.demo.socrata.com lives.demo.socrata.com  data.tol.ca tol.demo.socrata.com  data.providenceri.gov providenceri.demo.socrata.com  aquilent.demo.socrata.com clare-stat.demo.socrata.com jkray.demo.socrata.com spotlight.demo.socrata.com govstat3.demo.socrata.com govstat2.demo.socrata.com Fast\ Facts toronto.demo.socrata.com holdings.demo.socrata.com health.data.ny.gov nyhealth.demo.socrata.com www.health.data.ny.gov healthdata.ny.gov  bizstat.demo.socrata.com data.ny.gov nys.demo.socrata.com www.data.ny.gov  markstat.demo.socrata.com deleted-dev-stat.demo.socrata.com sprint-stat.demo.socrata.com sanmateocounty.demo.socrata.com data.redmond.gov redmond.demo.socrata.com  www.halifaxopendata.ca halifax.demo.socrata.com  felixhernandez@demo.socrata.com data.healthcare.gov datahealthcare.demo.socrata.com  dashboard.demo.socrata.com support.demo.socrata.com usgs.demo.socrata.com usgs.socrata.com  wa-portal.demo.socrata.com somervillegovstat.demo.socrata.com marcusstat.demo.socrata.com somerstat.demo.socrata.com somergs.demo.socrata.com  jerseycity.demo.socrata.com internet-ebs.demo.socrata.com charmstrong.demo.socrata.com navalsafetycenter.demo.socrata.com cs.socrata.com clientservices.demo.socrata.com  BizStatv1.demo.socrata.com arkansas.demo.socrata.com adrian.demo.socrata.com portal.louisvilleky.gov louisville-ky.demo.socrata.com  data.cacs.org cacs.demo.socrata.com  openview.demo.socrata.com do-not-use-lexington-ky.demo.socrata.com data.lexingtonky.gov lexington-ky.demo.socrata.com lexingtonky.socrata.com h-aihaelidai.socrata.com  data.cdc.gov cdc.socrata.com  chcf.demo.socrata.com ag.demo.socrata.com atlantagovstat.demo.socrata.com  540co.demo.socrata.com njdhss.demo.socrata.com plumbing.demo.socrata.com nolastat.demo.socrata.com nolags.demo.socrata.com  quantifiedmarcus.demo.socrata.com nolatest.demo.socrata.com dylan.demo.socrata.com epa.demo.socrata.com brookline.demo.socrata.com kittystat.demo.socrata.com adriangovstat.demo.socrata.com surreycc-govstat.demo.socrata.com hrsdc.demo.socrata.com updata.demo.socrata.com resdev.demo.socrata.com latam\ spanish\ site\ demo data.traviscountytx.gov travis.demo.socrata.com  govstat-uk.demo.socrata.com govstat-eu.demo.socrata.com  cam-stat.demo.socrata.com data.iae.alberta.ca alberta-eae.demo.socrata.com data.eae.alberta.ca  adrianapi.demo.socrata.com niyi.demo.socrata.com savannah.demo.socrata.com worlddata.demo.socrata.com dylanStat.demo.socrata.com kelstat.demo.socrata.com caldwellstat.demo.socrata.com kellief.demo.socrata.com kellie.demo.socrata.com  sfgov-mobile.demo.socrata.com nara.demo.socrata.com nara.demo.socrata.com  homebase.demo.socrata.com fastfacts.demo.socrata.com nifty50.demo.socrata.com pilar.demo.socrata.com cookcounty.demo.socrata.com reid.demo.socrata.com reid.demo.socrata.com  data.ci.newark.nj.us newark.demo.socrata.com  World\ Bank\ Group data.illinois.gov illinois.socrata.com www.data.illinois.gov  ben.demo.socrata.com queensland.demo.socrata.com snowcop.demo.socrata.com sfgov-mobile2.demo.socrata.com stopandfrisk.demo.socrata.com govfinder.socrata.com memphis.demo.socrata.com memphis.demo.socrata.com  wbfinances-staging.demo.socrata.com pacman.demo.socrata.com data.cityofnewyork.us nycplatform.socrata.com nycopendata.socrata.com  chesterfield.demo.socrata.com chesterfield.demo.socrata.com  spanish\ demo\ site latam-partners.demo.socrata.com idph.demo.socrata.com govhk.demo.socrata.com colin.demo.socrata.com stubox.demo.socrata.com mcac.demo.socrata.com performance.cookcountyil.gov odata.demo.socrata.com karinstat.demo.socrata.com sdis.medicaid.gov sdis-staging.demo.socrata.com ods.demo.socrata.com columbiaassociation.demo.socrata.com columbiaassociation.demo.socrata.com  hoco.demo.socrata.com data.results.wa.gov max.demo.socrata.com charlotte.demo.socrata.com data.nashville.gov nashville.demo.socrata.com  kray NAME.demo.socrata.com  data.atlantaga.gov atl.demo.socrata.com  data.cityofwestsacramento.org westsacramento.demo.socrata.com  provstat.demo.socrata.com soapbox.demo.socrata.com con.demo.socrata.com rieth.demo.socrata.com micros.demo.socrata.com WM.demo.socrata.com bvp-stat.demo.socrata.com  newfoundland.demo.socrata.com colinspikes.demo.socrata.com ar-govstat.demo.socrata.com insightpartners.demo.socrata.com hcc.demo.socrata.com hamster.demo.socrata.com flood2013.demo.socrata.com hcc-govstat.demo.socrata.com jonstat2.demo.socrata.com tampa.demo.socrata.com miami.demo.socrata.com data.medicare.gov orlando.demo.socrata.com augusta.demo.socrata.com data.opencolorado.org colorado.demo.socrata.com  beachseine.demo.socrata.com pueblacapital.demo.socrata.com puebla.demo.socrata.com  campinas-stat.demo.socrata.com code2013.healthdataconsortium.org hdp2013data.demo.socrata.com  cdp.demo.socrata.com hackforchange.socrata.com hiko.demo.socrata.com hiko-en.demo.socrata.com  healthstat.demo.socrata.com healthstat.demo.socrata.com  redes.demo.socrata.com quality.demo.socrata.com oregon-govstat.demo.socrata.com wall-e.demo.socrata.com  communities-dev.demo.socrata.com itu.demo.socrata.com sandiego.demo.socrata.com communities.socrata.com community.socrata.com  usda.demo.socrata.com nwcouncil.demo.socrata.com data.southbendin.gov southbend.demo.socrata.com  morrisville.demo.socrata.com projectopendata.demo.socrata.com houston.demo.socrata.com hud.demo.socrata.com ndch.demo.socrata.com fire-explorer.demo.socrata.com fema.demo.socrata.com  data.ojp.gov ojp.demo.socrata.com  chrisbythenumbers.demo.socrata.com bythenumbers.chrismetcalf.net  fas.demo.socrata.com cms-staging.demo.socrata.com wildlifetracs.demo.socrata.com patch.demo.socrata.com data.smcgov.org smc.demo.socrata.com  tobacco.demo.socrata.com georgia.demo.socrata.com electionsdata.kingcounty.gov elections-kingcounty.demo.socrata.com  ntxapps.demo.socrata.com cookcounty mcc-govstat.demo.socrata.com christian.demo.socrata.com ecuadorsupertel.demo.socrata.com www.dcadashboard.com dca-ats.demo.socrata.com dca.socrata.com  data.cityofgainesville.org gainesville.demo.socrata.com  lanit.demo.socrata.com opensourcedata.socrata.com opensourcedata.demo.socrata.com  spanish\ site\ demo williamsburg.demo.socrata.com williamsburg.demo.socrata.com  World\ Bank\  worldbank.demo.socrata.com WB  homebasetest.demo.socrata.com govstat.demo.socrata.com actdemo.demo.socrata.com ang.demo.socrata.com hongkong.demo.socrata.com hcgov-dashboard.demo.socrata.com chhs.data.ca.gov oshpd-beta.demo.socrata.com  data-dex-sg.demo.socrata.com jessica.demo.socrata.com www.surreyopendata.org surreycc.demo.socrata.com  sagia.demo.socrata.com nyc-govstat.demo.socrata.com romania.demo.socrata.com geoexplorer.demo.socrata.com ian.demo.socrata.com monterrey.demo.socrata.com baltimore-govstat.demo.socrata.com performance.baltimorecity.gov  raleigh-govstat.demo.socrata.com controllerdata.lacity.org la.demo.socrata.com  minnesota.demo.socrata.com njdoh riethstat.demo.socrata.com 311explorer.demo.socrata.com kcstat.kcmo.org kcmo-govstat.demo.socrata.com  nyucusp.demo.socrata.com govstat.jessica.demo.socrata.com njhealth.demo.socrata.com data.kray.com NAME.data.kray.com  smcstat-staging.demo.socrata.com datacatalog.cookcountyil.gov data.cookcountyil.gov cookcounty.socrata.com  www.dallasopendata.com dallas.demo.socrata.com  permuto.demo.socrata.com scramstat.demo.socrata.com data.dcpcsb.org dcpcsb.demo.socrata.com  microsoft.demo.socrata.com serbia.demo.socrata.com staffordshirepcc.demo.socrata.com andrewdomain.demo.socrata.com leeds.demo.socrata.com data.lacity.org lacity.demo.socrata.com  data.vermont.gov vermont.demo.socrata.com  stu.demo.socrata.com makewebnotwar.demo.socrata.com deloitte-govstat.demo.socrata.com reports.data.montgomerycountymd.gov montgomeryco-stat.demo.socrata.com  ewan.demo.socrata.com maryland-stat.demo.socrata.com ida.demo.socrata.com logancity.demo.socrata.com wvus-op.demo.socrata.com sustainablesm.demo.socrata.com aditya.demo.socrata.com brisbane.demo.socrata.com www.criminalytics.org legalanalytics.demo.socrata.com  hungary.demo.socrata.com templates.demo.socrata.com ifai.demo.socrata.com auckland.demo.socrata.com birmingham.demo.socrata.com opendata.lasvegasnevada.gov lasvegasnevada.demo.socrata.com  louis3.demo.socrata.com cityofsocrata.demo.socrata.com clearwater.demo.socrata.com newdelhi2.demo.socrata.com newdelhi.demo.socrata.com nyhealth-stat.demo.socrata.com ebidsystems.demo.socrata.com data.edmonton.ca edmonton.socrata.com  stubox demo.socrata.com saccounty.demo.socrata.com kew.demo.socrata.com kew2.demo.socrata.com  dc.demo.socrata.com seattlemayorstat.demo.socrata.com manchester.demo.socrata.com amy.demo.socrata.com nate.demo.socrata.com interaccess.demo.socrata.com plan-net.demo.socrata.com cmd.demo.socrata.com ethos.demo.socrata.com socratadata.iot.in.gov indiana.demo.socrata.com  nj-oit-2.demo.socrata.com albany.demo.socrata.com ers.demo.socrata.com bythenumbers.sco.ca.gov casco.demo.socrata.com followthemoney.sco.ca.gov  permuto.partner.socrata.com sdis-dev.demo.socrata.com cgi.demo.socrata.com belohorizonte-stat.demo.socrata.com belot.partner.socrata.com burlingtonvt.demo.socrata.com data.burlington.gov  pdu.worldbank.org worldbank-govstat.demo.socrata.com  alleghenycounty.hidden.demo.socrata.com pittsburgh.hidden.demo.socrata.com logancityapps.demo.socrata.com orangecountyca.demo.socrata.com defendersofwildlife.demo.socrata.com naturebridge.demo.socrata.com sra-govstat.demo.socrata.com indiana-kpi.demo.socrata.com florida.demo.socrata.com morenovalley.demo.socrata.com sanantonio.demo.socrata.com balefireglobal.demo.socrata.com bpd.demo.socrata.com cnycn.demo.socrata.com paloalto.demo.socrata.com data.auburnwa.gov auburn.demo.socrata.com  westhollywood.demo.socrata.com ca-boe caboe.demo.socrata.com data.ct.gov connecticut.demo.socrata.com  data.culvercity.org culvercity.demo.socrata.com  sitkatech.demo.socrata.com versailles.demo.socrata.com balefireodp.demo.socrata.com fppc.demo.socrata.com nmfs-deleted.socrata.com paladin.partner.socrata.com weho.azure-eastus-prod.socrata.com open.whitehouse.gov whitehouse.demo.socrata.com  stewards\ of\ change stewardsofchange.partner.socrata.com york.demo.socrata.com seeclickfix.demo.socrata.com devstat.demo.socrata.com recruitstat.demo.socrata.com bellevue.demo.socrata.com hampshire.demo.socrata.com hampshirehub.demo.socrata.com dashboard.hawaii.gov hawaii-govstat.demo.socrata.com  hampshirecc.demo.socrata.com bmgf-data.demo.socrata.com day.demo.socrata.com cwtest1 cityofhamilton.demo.socrata.com chistat.demo.socrata.com opendata.demo.socrata.com data.rentonwa.gov renton.demo.socrata.com  datos-mx.demo.socrata.com performance.smcgov.org soda2nbe.demo.socrata.com evergreen-govstat-walkthrough.demo.socrata.com gijon.demo.socrata.com prague.demo.socrata.com peoria.demo.socrata.com ontodia.partner.socrata.com data.cese.nsw.gov.au newsouthwales.demo.socrata.com  ontario.demo.socrata.com data.acgov.org mobilerepublic.partner.socrata.com cedarburg.demo.socrata.com tasmania.demo.socrata.com louisiana.demo.socrata.com northcarolina.demo.socrata.com southcarolina.demo.socrata.com sydney.demo.socrata.com stateofgeorgia.demo.socrata.com utest.demo.socrata.com berkeley-ca.demo.socrata.com cdp-stat.demo.socrata.com daan.demo.socrata.com gates-gl.demo.socrata.com tas-stat.demo.socrata.com cschoenmann.demo.socrata.com strathcona-reports.demo.socrata.com rubi.demo.socrata.com opendata.rubi.cat  ahrq.demo.socrata.com microsoft.partner.socrata.com data.mass.gov mass.demo.socrata.com  ohio.demo.socrata.com puertorico.demo.socrata.com data.datamontana.us montana.demo.socrata.com  dcbootcamp1.partner.socrata.com dc\ bootcamp\ 1 irving.demo.socrata.com robin-govstat.demo.socrata.com inforegio.azure-westeurope-prod.socrata.com philly.demo.socrata.com cabq.demo.socrata.com tucson.demo.socrata.com jeff.demo.socrata.com cityscape.demo.socrata.com regionefriuli.demo.socrata.com developmentgateway.partner.socrata.com citynextsolutions.demo.socrata.com stlouisco.demo.socrata.com performance-australia.demo.socrata.com alberta-ca-uat.demo.socrata.com alabama.demo.socrata.com data-au.demo.socrata.com lou.demo.socrata.com tyler.demo.socrata.com carlsbad.demo.socrata.com valerie.demo.socrata.com mississippi.demo.socrata.com tennessee.demo.socrata.com cor.demo.socrata.com dcbootcampgovstat.partner.socrata.com cityofdenton.demo.socrata.com adamscounty.demo.socrata.com robin.demo.socrata.com yachay.demo.socrata.com pa.demo.socrata.com nzrs.demo.socrata.com dcbootcamp2.demo.socrata.com dcbootcamp2.partner.socrata.com  training.demo.socrata.com data-vic.demo.socrata.com ncdatapalooza.demo.socrata.com data.opendatanetwork.com odn.demo.socrata.com  dpp.demo.socrata.com edifecs.demo.socrata.com commerce-govstat.demo.socrata.com roseville.azure-eastus-prod.socrata.com reportcard.santamonicayouth.net smwellbeing.demo.socrata.com  ml-ngo.demo.socrata.com data.texas.gov texas.demo.socrata.com  rentonwa.demo.socrata.com calistat.demo.socrata.com louisville.demo.socrata.com banxico.demo.socrata.com oakville.demo.socrata.com socialsolutions.partner.socrata.com civicinsight.partner.socrata.com virginia.demo.socrata.com philly2.demo.socrata.com nyctlc.demo.socrata.com kara.demo.socrata.com data.melbourne.vic.gov.au melbourne.demo.socrata.com  ca-stat.demo.socrata.com cincinnati.demo.socrata.com it-performance.demo.socrata.com lima.demo.socrata.com data.michigan.gov datasf.demo.socrata.com chhs.demo.socrata.com jlchuang.demo.socrata.com ladot.demo.socrata.com fdic.demo.socrata.com belize.demo.socrata.com strategicplanning1.aspe.hhs.gov aspe-strategicplanning1.demo.socrata.com  isabel.demo.socrata.com brigades.opendatanetwork.com cfa.socrata.com  pennsylvania.demo.govstat.com data.winnipeg.ca winnipeg.demo.socrata.com  captricity.demo.socrata.com cityofhamilton-stat.demo.socrata.com dashboard.edmonton.ca meumunicipio.demo.socrata.com treasury-data-act.demo.socrata.com data.atf.gov atf.demo.socrata.com atf.socrata.com  data.princegeorgescountymd.gov pgcounty.demo.socrata.com  hudsonoaks.demo.socrata.com govhack.opendatanetwork.com govhack.demo.socrata.com  pointgrow.partner.socrata.com data.cambridgema.gov cambridgema.demo.socrata.com  cw2 sustainablesaltlake.demo.socrata.com assetbuddy.demo.socrata.com southaustralia.demo.socrata.com performance.lacity.org lacity-stat.demo.socrata.com  chronicdata.cdc.gov chronicdata.demo.socrata.com  performance.chattanooga.gov chattanooga-govstat.demo.socrata.com  imls-deleted.demo.socrata.com deleted-data.snostat.org snohomishcounty.demo.socrata.com  massedudata.socrata.com massedudata.demo.socrata.com  asesoftware.partner.socrata.com aihw.demo.socrata.com timbox.demo.socrata.com aurora.demo.socrata.com riverside-nevermind.demo.socrata.com depricated_fortworthtexas.demo.socrata.com bmgf-staging.demo.socrata.com moval.demo.socrata.com indianapolis.demo.socrata.com indystat.demo.socrata.com hennepin.demo.socrata.com howardcounty.demo.socrata.com anaheim.demo.socrata.com ca.demo.socrat.com data.hartford.gov hartford.demo.socrata.com  burlington-ca.demo.socrata.com aucklandcouncil.demo.socrata.com ny-stat.demo.socrata.com altis.partner.socrata.com irs.demo.socrata.com www.aercdevdata.org wfp.demo.socrata.com  forage.demo.socrata.com tz-govstat.demo.socrata.com aspesp.demo.socrata.com strategicplanning.aspe.hhs.gov  cwtest.demo.socrata.com mdsha.demo.socrata.com austintexasstat.demo.socrata.com novascotia.demo.socrata.com opendatantx.demo.socrata.com outcomes.demo.socrata.com scs.demo.socrata.com stat.cityofgainesville.org gainesville-govstat.demo.socrata.com  asesstat.partner.socrata.com deleted-seedscientific.demo.socrata.com myworld.demo.socrata.com data.exim.gov healthtracker.demo.socrata.com govstat-showcase.demo.socrata.com data.murphytx.org murphytx.demo.socrata.com  data.fortworthtexas.gov fortworthtexas.demo.socrata.com  imls-data.demo.socrata.com iclei.demo.socrata.com data.cityofgp.com grandeprairie.demo.socrata.com  nys-staging.demo.socrata.com roseville.demo.socrata.com hoog.demo.socrata.com data.imls.gov imls.demo.socrata.com  chronicdata-stage.demo.socrata.com rally.demo.socrata.com padata.demo.socrata.com cw1 kcmetro.demo.socrata.com old.data.countyofriverside.us developfor.partner.socrata.com bea-deleted.demo.socrata.com industry-au.demo.socrata.com broadstreetmaps.partner.socrata.com cbfish.demo.socrata.com chattanooga-odp-staging.demo.socrata.com oshpd.demo.socrata.com missouricitytx.demo.socrata.com east.demo.socrata.com democity.demo.socrata.com  bigapple.demo.socrata.com sinatra.demo.socrata.com del-pg.demo.socrata.com nnlm.demo.socrata.com cambridge-migrationtest.demo.socrata.com bmgf-soweto.demo.socrata.com govhackopendata.demo.socrata.com data.nj.gov nj-oit.demo.socrata.com  bmgf-bangladesh.demo.socrata.com un-mdg.demo.socrata.com stubox2.demo.socrata.com dca-staging.demo.socrata.com melbourne-staging.demo.socrata.com star-govstat.demo.socrata.com victoria.demo.socrata.com data.cityofberkeley.info berkeley.demo.socrata.com  data.cityoftacoma.org tacoma.demo.socrata.com  santos-sp.demo.socrata.com tijuana.demo.socrata.com stubox3.demo.socrata.com belize-govstat.demo.socrata.com suffolk.demo.socrata.com moco-budget.demo.socrata.com dylan2.demo.socrata.com fhfa.demo.socrata.com inforegio.demo.socrata.com caltrans.demo.socrata.com interaction.demo.socrata.com hoog-govstat.demo.socrata.com inspur.partner.socrata.com djc.demo.socrata.com dubbo.demo.socrata.com littlerock-staging.demo.socrata.com nasa-data.demo.socrata.com data.cincinnati-oh.gov cincinnati-data.demo.socrata.com  ohfa.demo.socrata.com bostongovstat.demo.socrata.com rally-webinar.demo.socrata.com planwashington.demo.socrata.com cftc.demo.socrata.com census.demo.socrata.com medicaid-staging.demo.socrata.com minneapolis.demo.socrata.com data.code4sa.org code4sa.demo.socrata.com  sungard.partner.socrata.com missionsource.partner.socrata.com performance.cityofrc.us cityofrc.demo.socrata.com  reports.data.imls.gov imls-reports.demo.socrata.com  missionsource-govstat.partner.socrata.com evergreen-budget.demo.socrata.com wycokck.demo.socrata.com columbus.demo.socrata.com providence-migrationtest.demo.socrata.com nsrc-industry.demo.socrata.com mainereports.demo.socrata.com mcac-govstat.demo.socrata.com mcac-reports.demo.socrata.com  tulsa.demo.socrata.com novascotia-data.demo.socrata.com data.oxnard.org oxnard.demo.socrata.com  jonathanbox.demo.socrata.com pew.demo.socrata.com test-budget.demo.socrata.com transparencyapps.demo.socrata.com prstat.demo.socrata.com data.sonomacounty.ca.gov sonomacounty.demo.socrata.com  nchh-govstat.demo.socrata.com detroit.demo.socrata.com lacity-staging.demo.socrata.com parracity.demo.socrata.com ctcomptroller.demo.socrata.com chandler.demo.socrata.com dubbo-data.demo.socrata.com nist.demo.socrata.com parracity-govstat.demo.socrata.com nist-stat.demo.socrata.com eeoc.demo.socrata.com data.brla.gov batonrouge.demo.socrata.com  dataspace.demo.socrata.com api1.dataspace.demo.socrata.com api2.dataspace.demo.socrata.comm api3.dataspace.demo.socrata.com  midashboard.michigan.gov michigan-govstat.demo.socrata.com  nasa-test-0.demo.socrata.com data.chattlibrary.org data.chattanooga.gov  diversifynevada.demo.socrata.com dn-stat.demo.socrata.com frederickcounty.demo.socrata.com sct-stat.demo.socrata.com vetdata.demo.socrata.com iacp-govstat.demo.socrata.com iacp-data.demo.socrata.com  nyc-staging.demo.socrata.com pew-stat.demo.socrata.com cftc-govstat.demo.socrata.com data.awcnet.org awc.demo.socrata.com  dex-sg-data.demo.socrata.com meredithu.demo.socrata.com data.vta.org vta.demo.socrata.com  christchurch.demo.socrata.com eastwestchats.partner.socrata.com opendata.american.edu datapilot.american.edu au.demo.socrata.com  cnv.demo.socrata.com jonathanstat.demo.socrata.com odi.demo.socrata.com urban-institute.demo.socrata.com campinasstat.demo.socrata.com barcelona.demo.socrata.com dylan3.demo.socrata.com gainesville-migrationtest.demo.socrata.com bayesimpact.partner.socrata.com stan.demo.socrata.com stateofvirginia.demo.socrata.com darrell-test.demo.socrata.com darrell.demo.socrata.com  charlottedata.demo.socrata.com www.opendatacharlotte.com opendatacharolette.com  utahperformance.demo.socrata.com www.datossct.gob.mx sct.demo.socrata.com datos.sct.gob.mx  guelph.demo.socrata.com ui-tpc.demo.socrata.com usaid-alc-dashboard.demo.socrata.com louis0.demo.socrata.com daniel.demo.socrata.com santamonica-migrationtest.demo.socrata.com trimble.partner.socrata.com lveud.demo.socrata.com louis1.demo.socrata.com deptcommerce-govstat.demo.socrata.com diac-govstat.demo.socrata.com opendata.cityofhenderson.com henderson.demo.socrata.com  scytl.partner.socrata.com steve.demo.socrata.com api1.steve.demo.socrata.com api2.steve.demo.socrata.comm api3.steve.demo.socrata.com  aapa.demo.socrata.com deloitte.partner.socrata.com edba.demo.socrata.com mvcc.demo.socrata.com mooneevalley.demo.socrata.com edba-govstat.demo.socrata.com faa.demo.socrata.com nci.demo.socrata.com lapalma.demo.socrata.com alexstat.demo.socrata.com surrey-dashboard.demo.socrata.com opendata.utah.gov utah.demo.socrata.com  mastatnet.demo.socrata.com data.urbanaillinois.us urbana.demo.socrata.com  sra.demo.socrata.com seattleperformance.demo.socrata.com data.smgov.net santamonica.demo.socrata.com  eastwest-chats.partner.socrata.com cdph.data.ca.gov planwashington2015.demo.socrata.com evergreen-govstat.demo.socrata.com moco-spending.demo.socrata.com deloitte.demo.socrata.com wa.demo.socrata.com data.richmondgov.com richmond.demo.socrata.com  mark.demo.socrata.com mundiapolis-stat.demo.socrata.com omb.demo.socrata.com santos-stat.demo.socrata.com ontarioregion.demo.socrata.com cms-oipda.demo.socrata.com openperformance1.demo.socrata.com cdc-staging.demo.socrata.com bmgf-reports.demo.socrata.com data.countyofriverside.us riverside-beta.demo.socrata.com  openpaymentsdata.test.cms.gov openpaymentsdata-staging-origin.cms.gov openpaymentsdata-staging.demo.socrata.com  newbase.demo.socrata.com data.olatheks.org olathe.demo.socrata.com  pueblacapital-stat.demo.socrata.com ftb.demo.socrata.com openperformance.demo.socrata.com reidvillestat.demo.socrata.com  cognizant.demo.socrata.com pg-sandbox.demo.socrata.com bindu.demo.socrata.com data.hampton.gov hampton.demo.socrata.com  mundiapolis.demo.socrata.com nats-stat.demo.socrata.com provo.demo.socrata.com opendata.sreb.org sreb.demo.socrata.com  emmademo.demo.socrata.com cognizant-data.demo.socrata.com openpaymentsdata.cms.gov openpaymentsdata-origin.cms.gov openpaymentsdata.demo.socrata.com  industry-au-reports.demo.socrata.com charlotte-data.demo.socrata.com calgary-data.demo.socrata.com bmgf-sandbox.demo.socrata.com tacomaperformance.demo.socrata.com bea-data.demo.socrata.com bea.demo.socrata.com  sdotperformance.seattle.gov seattle-govstat.demo.socrata.com  cityofcharlotte.demo.socrata.com performance.glendaleca.gov glendale-govstat.demo.socrata.com  sungard-performance.partner.socrata.com nea.demo.socrata.com opensecurity.demo.socrata.com cpd.demo.socrata.com nea-govstat.demo.socrata.com austintexas-stat.demo.socrata.com salem-op.demo.socrata.com urban-institute.demo.socrata.com\  ladot-performance.demo.socrata.com energy-worldbank.demo.socrata.com pml.demo.socrata.com fortworth-migrationtest.demo.socrata.com new\ castle treasury.demo.socrata.com treasury-fir.demo.socrata.com  data.strathcona.ca strathcona.demo.socrata.com  santamonica-stat.demo.socrata.com edd.demo.socrata.com fullerton.demo.socrata.com utah-performance.demo.socrata.com www.natsdatasct.gob.mx nats.demo.socrata.com natsdata.sct.gob.mx  guelphdata.demo.socrata.com keithperformance.demo.socrata.com ecocity.demo.socrata.com wellington.demo.socrata.com deprecated.demo.socrata.com rally-walkthrough.demo.socrata.com bmgf-training.demo.socrata.com safe.partner.socrata.com ihme.demo.socrata.com impact.glispa.org glispa-op.demo.socrata.com  magpi.demo.socrata.com mtc.demo.socrata.com data.srcity.org santarosa.demo.socrata.com  performance.action.act.gov.au action-act.demo.socrata.com  usda-nal.demo.socrata.com aapa-delete.demo.socrata.com twid.demo.socrata.com va-govstat.demo.socrata.com danielkirk.demo.socrata.com danielkirkdemo  cityscape-walkthrough.demo.socrata.com undp.demo.socrata.com homebase-walkthrough.demo.socrata.com seattle-performance.demo.socrata.com hartford-op.demo.socrata.com hartstat.hartford.gov  data.montgomeryschoolsmd.org mcps.demo.socrata.com  andrac.partner.socrata.com charlottew.demo.socrata.com data.iowa.gov iowa.demo.socrata.com  ori.demo.socrata.com louis2.demo.socrata.com ckan.demo.socrata.com drivedecisions.partner.socrata.com deptcommerce-govstat-dashboard.demo.socrata.com noaa-govstat.demo.socrata.com esa-commerce-govstat.demo.socrata.com esa-govstat.demo.socrata.com act-reports.demo.socrata.com commerce-test.demo.socrata.com commerce-test.demo.socrata.com  commerce.demo.socrata.com bah.demo.socrata.com mydata.iadb.org iadb.demo.socrata.com  mark-govstat.demo.socrata.com idra.demo.socrata.com doi.demo.socrata.com softmanagement.partner.socrata.com hoog2.demo.socrata.com hoog3.demo.socrata.com doi-siwro.demo.socrata.com gencat.demo.socrata.com montgomerycounty-migrationtest.demo.socrata.com sanfrancisco-migrationtest.demo.socrata.com moco-migrationtest.demo.socrata.com kcmo-migrationtest.demo.socrata.com data.readingpa.gov readingpa.demo.socrata.com  keith.demo.socrata.com stubox-projectexplorer.demo.socrata.com bondsexplorer.demo.socrata.com  noviperformance.demo.socrata.com rose.demo.socrata.com murphytx-staging.demo.socrata.com rally-performance.demo.socrata.com data.livewellsd.org lwsd-odp.demo.socrata.com  donotusethissite.demo.socrata.com ori-performance.demo.socrata.com bread.demo.socrata.com dca-sandbox.demo.socrata.com sudan-odp.demo.socrata.com alicia.demo.socrata.com douglascounty.demo.socrata.com grant-thornton-stat.partner.socrata.com grant-thornton-delete-me.partner.socrata.com bigmountaindata.partner.socrata.com tni.princegeorgescountymd.gov pg-performance.demo.socrata.com  dept-op.demo.socrata.com performance.princegeorgescountymd.gov  hartford-migrationtest.demo.socrata.com conn-migrationtest.demo.socrata.com murphy-migrationtest.demo.socrata.com winnipeg-migrationtest.demo.socrata.com edmonton-migrationtest.demo.socrata.com aca2015.demo.socrata.com thegreenland.demo.socrata.com data.detroitmi.gov detroit-data.demo.socrata.com  waterloo.demo.socrata.com tol-dashboard.demo.socrata.com iowaperformance.demo.socrata.com seattle-op.demo.socrata.com informatica.partner.socrata.com iowaociostat.demo.socrata.com iowaperformance2.demo.socrata.com denverco.demo.socrata.com performance.danvilleva.gov danville-op.demo.socrata.com  rally-performance-walkthrough.demo.socrata.com atf-performance.demo.socrata.com westfield.demo.socrata.com westfield-stat.demo.socrata.com ontario-data.demo.socrata.com westfield2.demo.socrata.com ontario-education.demo.socrata.com ontario-finance.demo.socrata.com ontario-dashboard.demo.socrata.com nypd.demo.socrata.com cityofgp-performance.demo.socrata.com newwestcity.demo.socrata.com kingston.demo.socrata.com torontopubliclibrary.demo.socrata.com not-denver.demo.socrata.com camsys.demo.socrata.com data.nlc.org nlc.demo.socrata.com  rally-tumblr.demo.socrata.com urmila.demo.socrata.com noviperformance2.demo.socrata.com whitehousebudget.demo.socrata.com campinas.demo.socrata.com unmdgs-reports.demo.socrata.com vha-performance.demo.socrata.com vha-performance-reporting.demo.socrata.com iadb-staging.demo.socrata.com susan.demo.socrata.com iadb-stage.demo.socrata.com old-usbr.demo.socrata.com reclamation.demo.socrata.com nola-op.demo.socrata.com results.nola.gov  data.nccde.org nccde.demo.socrata.com  reports.awcnet.org awc-op.demo.socrata.com  clara-i.demo.socrata.com performance.seattle.gov performanceseattle.demo.socrata.com  nasa-test-1.demo.socrata.com results.livewellsd.org lwsd.demo.socrata.com  energy-worldbank-staging.demo.socrata.com chhs-dor.demo.socrata.com atf-performance-dashboards.demo.socrata.com portal-brasileiro.demo.socrata.com opendata.miamidade.gov miamidade.demo.socrata.com  openair.demo.socrata.com 2014bonds.cityofws.org winston-salem.demo.socrata.com  data.danvilleva.gov danville.demo.socrata.com  geelong.demo.socrata.com plano.demo.socrata.com dashboard.plano.gov plano-op.demo.socrata.com  data.littlerock.org littlerock.demo.socrata.com  iclei-data.demo.socrata.com elumitas.demo.socrata.com fema-data.demo.socrata.com jessicas.demo.socrata.com performance.jessicas.demo.socrata.com healthdata.demo.socrata.com healthdata-bah.demo.socrata.com healthdata-deloitte.demo.socrata.com healthdata-phase2.demo.socrata.com  lacounty.demo.socrata.com jessicasperformance.demo.socrata.com bis.data.commerce.gov commerce-bis.demo.socrata.com  christine.demo.socrata.com medisecure.demo.socrata.com tz-govstat-staging.demo.socrata.com dia-nz.demo.socrata.com data.nasa.gov nasa-data.socrata.com nasa-data-ingress.demo.socrata.com code-dev.arc.nasa.gov  djcabales.demo.socrata.com not-christine.demo.socrata.com slco-performance.demo.socrata.com ksde.demo.socrata.com honolulu-staging.demo.socrata.com greaterspringfield.demo.socrata.com seahawk.demo.socrata.com portcoquitlam.demo.socrata.com alberta-dashboard.demo.socrata.com bah-performance-partner.demo.socrata.com fcc-data.demo.socrata.com performance.reno.gov reno.demo.socrata.com  maine.demo.socrata.com data.maine.gov  passhe.demo.socrata.com cdph-redesign-dontuse.demo.socrata.com cdph-redesign.demo.socrata.com howardcountymd.demo.socrata.com opendata.howardcountymd.gov  data.sunshinecoast.qld.gov.au sunshinecoast.demo.socrata.com  raleighnc-staging.demo.socrata.com ire.demo.socrata.com ed.demo.socrata.com ed-data-performance.demo.socrata.com sacramento.demo.socrata.com lvbenchmark.demo.socrata.com menlopark.demo.socrata.com data.menlopark.org  mecklenburg-stat.demo.socrata.com bea.data.commerce.gov commerce-bea.demo.socrata.com  census.data.commerce.gov commerce-census.demo.socrata.com  eda.data.commerce.gov commerce-eda.demo.socrata.com  esa.data.commerce.gov commerce-esa.demo.socrata.com  ita.data.commerce.gov commerce-ita.demo.socrata.com  nist.data.commerce.gov commerce-nist.demo.socrata.com  data.monroecounty-fl.gov monroe.demo.socrata.com  data.commerce.gov commerce-data.demo.socrata.com  mbda.data.commerce.gov commerce-mbda.demo.socrata.com  noaa.data.commerce.gov commerce-noaa.demo.socrata.com  ntia.data.commerce.gov commerce-ntia.demo.socrata.com  ntis.data.commerce.gov commerce-ntis.demo.socrata.com  uspto.data.commerce.gov commerce-uspto.demo.socrata.com  geo.demo.socrata.com geo.socrata.com api1.geo.socrata.com api2.geo.socrata.com api3.geo.socrata.com api4.geo.socrata.com  arlingtonps.demo.socrata.com portcoquitlam-dashboard.demo.socrata.com portcoquitlam-data.demo.socrata.com topeka-dontuse.demo.socrata.com topeka.demo.socrata.com atf-staging.demo.socrata.com hsmptest-replica.demo.socrata.com winnipeg-dashboard.demo.socrata.com winnipeg-stat.demo.socrata.com marietta-performance.demo.socrata.com pstemplate-sungard.partner.socrata.com detroit-dashboard.demo.socrata.com weho-staging.demo.socrata.com montgomerycountymd-staging.demo.socrata.com industry-au-report.demo.socrata.com serviceconnect.demo.socrata.com hayward.demo.socrata.com permits.demo.socrata.com zillow.demo.socrata.com  pipadados.demo.socrata.com federal.demo.socrata.com illgomb.demo.socrata.com nysdoh-staging.demo.socrata.com illgomb1.demo.socrata.omc illgomb2.demo.socrata.com midashboard-staging.demo.socrata.com illgomb3.demo.socrata.com daniella.demo.socrata.com tucson-odp.demo.socrata.com opendata.tucsonaz.gov  pratap.demo.socrata.com greaterspringfield-stat.demo.socrata.com benvaron.demo.socrata.com louiestat.demo.socrata.com modesto-performance.demo.socrata.com readinesscheck.demo.socrata.com healthcheck.demo.socrata.com'.split
end
# END MANUAL CONFIG

def all_style_package_names
  YAML.load_file('config/style_packages.yml').keys
end

def all_js_package_names
  YAML.load_file('config/assets.yml')['javascripts'].keys
end

def all_angular_template_relpaths
  angular_template_dir = 'public/angular_templates/'
  Dir.glob("#{angular_template_dir}**/*").map { |path| path[angular_template_dir.length..-1] }
end

def all_style_package_paths
  all_style_package_names.map { |package_name| "/styles/merged/#{package_name}.css" }
end

def all_js_package_paths
  all_js_package_names.map do |package_name|
    [ "/packages/#{package_name}.js", "/packages/unminified/#{package_name}.js" ]
  end.flatten
end

def all_angular_template_paths
  all_angular_template_relpaths.map { |template_relpath| "/angular_templates/#{template_relpath}" }
end

def all_package_paths
  style_cachebust_paths = all_style_package_paths.map { |package_path| "#{package_path}?#{cachebust_key_for_templates_and_styles}" }
  js_cachebust_paths = all_js_package_paths.map do |package_path|
    cachebust_keys_for_js.map { |key| "#{package_path}?#{key}" }
  end.flatten
  angular_cachebust_paths = all_angular_template_paths.map { |package_path| "#{package_path}?assetRevisionKey=#{cachebust_key_for_templates_and_styles}" }
  style_cachebust_paths + js_cachebust_paths + angular_cachebust_paths
end

def generate_curl_commands
  domains_and_aliases.map do |domain|
    urls = all_package_paths.map do |path|
      "'http://0.0.0.0:8080#{path}'"
    end
    "echo -e '\\n#{domain}' && curl -s -w '%{http_code} ' -H 'Host: #{domain}' -X PURGE #{urls.join(' ')}"
  end
end

output_filename = 'purge_assets_generated.sh'
puts('Writing script...')
File.write(output_filename, generate_curl_commands.join("\n"))
puts("Wrote script #{output_filename}")

puts('Copying via SCP to each ATS host')
ats_hosts.each do |ats_host|
  system("chmod +x #{output_filename}")
  system("scp #{output_filename} #{ats_host}:")
end

puts('Please SSH in to each host and run the script (probably in a screen session)')

ats_hosts.each do |ats_host|
  # puts("ssh #{ats_host} screen -d -m ./#{output_filename}")
  puts(%Q[ssh #{ats_host} "(sh ./#{output_filename} ; rm #{output_filename})"])
end
